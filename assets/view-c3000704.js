import{_ as C}from"./PageTitle-d0b6dd5a.js";import{v as S,a0 as A,Y as n,a5 as N,r as U,o as l,d as r,g as m,e as t,w as h,F as y,i as g,h as p,t as d,l as k,k as E,f as L,aQ as R}from"./index-7b0ed318.js";import"./ArrowShape-9bc85e00.js";/* empty css                                                   *//* empty css                                                  */const W={class:"content"},z={class:"files_path"},M=t("span",{class:"path_div"},null,-1),$={key:0,class:"files_children"},j=t("div",{class:"img_box"},[t("svg",{t:"1722161427438",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3372",width:"200",height:"200"},[t("path",{d:"M832 874.666667h-640A105.386667 105.386667 0 0 1 85.333333 770.986667V253.013333A105.386667 105.386667 0 0 1 192 149.333333h196.266667a42.666667 42.666667 0 0 1 32.853333 15.786667l110.933333 135.68h298.666667A105.386667 105.386667 0 0 1 938.666667 404.48v366.506667a105.386667 105.386667 0 0 1-106.666667 103.68z","p-id":"3373"})])],-1),D={class:"text_box"},G={class:"main_text"},I=t("p",{class:"sub_text"},"Folder",-1),K=["onClick"],Q={class:"img_box"},T=["src"],Y={class:"text_box"},q={class:"main_text"},H={class:"sub_text"},J={key:1,class:"acitve_file_box"},O=["src"],ae={__name:"view",setup(P){const w=S(),b=A(),x=n("");x.value=localStorage.getItem("server_address");const B=n(null),c=n(null),v=n([]),_=n([]);function F(s){return s<1024?s+"B":s<1024*1024?(s/1024).toFixed(2)+"KB":s<1024*1024*1024?(s/1024/1024).toFixed(2)+"MB":(s/1024/1024/1024).toFixed(2)+"GB"}async function V(){var e,f;const s=c.value,a=await R.get(x.value+"/info"+s,{headers:{token:w.tokenid}});if(!a){console.error("网络错误");return}if(a.status!==200){console.error("网络错误");return}const o=a.data;if(o.status!=="success"){console.log(o);return}B.value=o.data,console.log(o.data),_.value=[],(f=(e=o.data)==null?void 0:e.children)==null||f.forEach(i=>{i.type==="directory"?_.value.push({type:"directory",name:i.name}):i.type==="file"&&i.name.endsWith(".webp")&&_.value.push({type:"file",name:i.name,size:i.size,display_size:F(i.size),src:o.data.full_path+"/"+i.name})})}N(()=>b.params,s=>{if(c.value="",v.value=[],s.id){let a=s.id.join("/");a.startsWith("/")&&(a=a.slice(1)),a.endsWith("/")&&(a=a.slice(0,-1)),c.value=a;let o="";a.split("/").forEach(e=>{o+="/"+e,v.value.push({name:e,path:o})})}V()},{immediate:!0});const u=n(null);return(s,a)=>{const o=U("RouterLink");return l(),r("div",W,[m(C,{title:"View Upload",children:[{title:"Upload",link:"/laboratory/upload"},{title:"View Upload",link:"/laboratory/view_upload"},{title:"Server Settings",link:"/laboratory/upload_server"}]}),t("div",z,[m(o,{to:"/laboratory/view_upload",class:"path_link"},{default:h(()=>[k("Uploaded Files")]),_:1}),(l(!0),r(y,null,g(v.value,e=>(l(),r(y,{key:"/laboratory/view_upload"+e.path},[M,m(o,{to:"/laboratory/view_upload"+e.path,class:"path_link"},{default:h(()=>[k(d(e.name),1)]),_:2},1032,["to"])],64))),128))]),_.value.length>0?(l(),r("div",$,[(l(!0),r(y,null,g(_.value,e=>(l(),r("div",{class:"file_child",key:e.name},[e.type==="directory"?(l(),E(o,{key:0,class:"file_item directory",to:"/laboratory/view_upload/"+(c.value&&c.value+"/")+e.name},{default:h(()=>[j,t("div",D,[t("p",G,d(e.name),1),I])]),_:2},1032,["to"])):p("",!0),e.type==="file"?(l(),r("div",{key:1,class:L(["file_item file",{active:u.value===e}]),onClick:f=>u.value=e},[t("div",Q,[t("img",{src:e.src},null,8,T)]),t("div",Y,[t("p",q,d(e.name),1),t("p",H,d(e.display_size),1)])],10,K)):p("",!0)]))),128))])):p("",!0),u.value?(l(),r("div",J,[t("p",null,d(u.value.src),1),t("img",{src:u.value.src},null,8,O)])):p("",!0)])}}};export{ae as default};
