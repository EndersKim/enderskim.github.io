import{d as b}from"./display_json_text-3f64df4d.js";import{ap as A,V as F,Y as r,$ as L,r as M,o as e,d as t,e as a,n as x,g as w,w as N,f as z,t as l,p as d,h as o,aq as R,k as C,ar as $,a9 as j,F as D}from"./index-7b0ed318.js";import{p as E}from"./parse_song_data-4a69154e.js";import{P as Y}from"./Pause-5c2f2a53.js";const G={key:0,class:"a_song"},H={class:"bg_wrapper"},I=a("div",{class:"img_back"},null,-1),J={class:"text_wrapper"},K={class:"title_box"},O={class:"main_title"},Q={key:0,class:"sub_title"},T={class:"song_tags"},U={key:0,class:"song_tag"},W={key:1,class:"song_tag_dot"},X={key:2,class:"song_tag"},Z={class:"play_buttons"},ss={key:1,class:"a_song_error"},as={key:2,class:"a_song_error"},_s={__name:"ASong",props:["song_id"],setup(g){const{song_id:S}=g,u=A(),v=F(()=>{var n,c;return _&&((n=u.current_song)==null?void 0:n.song_key)==((c=_.value)==null?void 0:c.song_key)&&u.current_song_state=="playing"}),s=r(null),i=r("loading"),_=r(null);B();async function B(){const n=await L("/archive/music/get_song_detail.php",{song_id:S});if(n.status!="success"){i.value="error";return}i.value="success",s.value=n.data.song,_.value=E(s.value)}function P(){u.push_song(_.value)}function V(){u.push_and_play_song(_.value)}return(n,c)=>{var p,m,y,k,h;const q=M("RouterLink");return e(),t(D,null,[s.value?(e(),t("div",G,[a("div",H,[a("div",{class:"bg",style:x({"background-image":"url("+((p=s.value)==null?void 0:p.cover_url)+")"})},null,4)]),w(q,{class:"img_wrapper",to:"/archive/music/songs/"+((m=s.value)==null?void 0:m.song_id)},{default:N(()=>{var f;return[a("div",{class:z(["img_item",{playing:v.value}]),style:x({"background-image":"url("+((f=s.value)==null?void 0:f.cover_url)+")"})},null,6),I]}),_:1},8,["to"]),a("div",J,[a("div",K,[a("span",O,l((y=s.value)==null?void 0:y.title),1),d(b)((k=s.value)==null?void 0:k.title_t)?(e(),t("span",Q,"("+l(d(b)((h=s.value)==null?void 0:h.title_t))+")",1)):o("",!0)]),a("div",T,[s.value._artists_name?(e(),t("span",U,l(s.value._artists_name),1)):o("",!0),s.value._artists_name&&s.value.audio_duration?(e(),t("span",W," · ")):o("",!0),s.value.audio_duration?(e(),t("span",X,l(d(R)(s.value.audio_duration)),1)):o("",!0)])]),a("div",Z,[a("div",{class:"song_button",onClick:V},[v.value?(e(),C(Y,{key:1})):(e(),C($,{key:0}))]),a("div",{class:"song_button plus_button",onClick:P},[w(j)])])])):o("",!0),i.value=="error"?(e(),t("div",ss,[a("p",null,"⚠ Failed to Load Song: "+l(g.song_id),1)])):o("",!0),i.value=="loading"?(e(),t("div",as)):o("",!0)],64)}}};export{_s as _};
