import{ar as C,Y as o,a0 as k,a5 as M,$ as B,c as E,o as u,d as _,g as n,e as s,t as r,w as I,T as L,h as x,J as w,O as N,ap as O,Z as S}from"./index-b89d1eee.js";import{_ as V}from"./PageTitle-602ecdca.js";import{_ as D}from"./SongsList-a6e5ab4b.js";import{_ as H}from"./Pagination.vue_vue_type_style_index_0_lang-47d5d279.js";import{p as T}from"./parse_song_data-37d2712a.js";import"./ArrowShape-289fddb4.js";/* empty css                                                   *//* empty css                                                  */import"./Pause-18fc55ff.js";import"./More-5ad9ac65.js";import"./display_json_text-7c4c1aa6.js";const Z={class:"songs content"},z={class:"songlist_buttons_box"},J={class:"songlist_buttons"},R=s("div",{class:"icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22",class:""},[s("g",null,[s("path",{d:"M2.36807692,21.8609375 C2.91885817,21.8609375 3.41104567,21.696875 4.07901442,21.3101562 L18.2118269,13.11875 C19.2899519,12.4859375 19.8524519,11.8882812 19.8524519,10.9507812 C19.8524519,10.0132812 19.2899519,9.415625 18.2118269,8.79453125 L4.07901442,0.59140625 C3.41104567,0.2046875 2.91885817,0.040625 2.36807692,0.040625 C1.24307692,0.040625 0.317295673,0.89609375 0.317295673,2.3375 L0.317295673,19.5640625 C0.317295673,21.0054687 1.24307692,21.8609375 2.36807692,21.8609375 Z"})])])],-1),Y={class:"text"},j={class:"icon"},A={width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(2.2)"}},F=s("path",{d:"M20.767 20.44a.81.81 0 00.49-.183l2.58-2.174c.316-.266.316-.681 0-.955l-2.58-2.183a.81.81 0 00-.49-.183c-.415 0-.673.258-.673.673v1.245h-1.162c-.739 0-1.195-.233-1.718-.847l-1.527-1.801 1.527-1.81c.54-.63.946-.847 1.677-.847h1.203v1.279c0 .407.258.664.673.664a.801.801 0 00.49-.174l2.58-2.175c.316-.266.316-.69 0-.955l-2.58-2.183a.761.761 0 00-.49-.183c-.415 0-.673.258-.673.665v1.386h-1.212c-1.228 0-1.992.34-2.863 1.386l-1.412 1.668-1.469-1.751c-.805-.946-1.569-1.303-2.747-1.303H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.437c.697 0 1.162.225 1.685.847l1.519 1.801-1.52 1.81c-.53.623-.954.847-1.643.847H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.536c1.179 0 1.901-.356 2.706-1.303l1.478-1.751 1.444 1.718c.822.98 1.627 1.336 2.822 1.336h1.212v1.412c0 .415.258.672.673.672z"},null,-1),G=[F],K={class:"text"},P={class:"songlist_loading"},Q={class:"songlist_top"},U={class:"section_title"},W={class:"songlist_count"},X={class:"songlist_content"},ss={class:"songlist_songs"},ts={key:0,class:"songlist_pagination blur_part"},p=100,ps={__name:"songs",setup(es){const e=C(),a=o(null),c=o("loading"),g=k(),i=o(0),l=o(g.query.page?parseInt(g.query.page):1);m(l.value,!1),M(()=>g.query.page,t=>{l.value=t?parseInt(t):1,m(l.value,!0)});const v=o(1),h=o(null);async function m(t,f){c.value="loading";const d=await B("/archive/music/get_songs.php",{page:t});if(d.status!="success"){c.value="error";return}f&&E(h.value),c.value="success",a.value=[],v.value=(l.value-1)*p+1;const $=d.data.songs;i.value=parseInt(d.data.count),$.forEach(b=>{a.value.push(T(b))})}function q(){a.value&&(e.queue=[],a.value.forEach(t=>{e.queue.indexOf(t)==-1&&e.queue.push(t)}),e.current_song=e.queue[0],e.current_song_index=0,w({message:"已替换播放队列为本页歌曲"}))}function y(){a.value&&(e.queue=[],a.value.forEach(t=>{e.queue.indexOf(t)==-1&&e.queue.push(t)}),e.queue.sort(()=>Math.random()-.5),e.current_song=e.queue[0],e.current_song_index=0,w({message:"已替换播放队列为本页歌曲 (随机排序)"}))}return(t,f)=>(u(),_("div",Z,[n(V,{title:t.$text("nav.archive.music.songs"),parent:{title:t.$text("nav.archive.music"),link:"/archive/music"}},null,8,["title","parent"]),s("div",z,[s("div",J,[s("button",{class:"action_button",onClick:q},[R,s("p",Y,r(t.$text("archive.music.play_all")),1)]),s("button",{class:"action_button",onClick:y},[s("div",j,[(u(),_("svg",A,G))]),s("p",K,r(t.$text("archive.music.random_play")),1)])])]),a.value?(u(),_("div",{key:0,class:"songlist_box section",ref_key:"songlist_box",ref:h},[n(L,{name:"loading_fade"},{default:I(()=>[N(s("div",P,[n(S,{loading:""})],512),[[O,c.value=="loading"]])]),_:1}),s("div",Q,[s("h3",U,r(t.$text("archive.music.all_songs")),1),s("p",W,r(i.value),1)]),s("div",X,[s("div",ss,[n(D,{songs_data:a.value,start_index:v.value},null,8,["songs_data","start_index"]),i.value>p?(u(),_("div",ts,[n(H,{max_page:Math.ceil(i.value/p)},null,8,["max_page"])])):x("",!0)])])],512)):x("",!0)]))}};export{ps as default};
