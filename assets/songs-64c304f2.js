import{ao as C,O as a,V as k,Z as $,$ as M,c as B,o as u,d as _,g as n,e as s,w as E,T as V,t as D,h as f,D as x,H,am as I,Q as L}from"./index-dd97f7dd.js";import{_ as N}from"./PageTitle-c14d76ea.js";import{_ as O}from"./SongsList-01d7afb1.js";import{_ as S}from"./Pagination.vue_vue_type_style_index_0_lang-07d67049.js";import{p as T}from"./parse_song_data-ec222120.js";import"./ArrowShape-5541c851.js";/* empty css                                                   *//* empty css                                                  */import"./Pause-fcd2d74c.js";import"./More-862bc3c4.js";import"./display_json_text-af9808a2.js";const Z={class:"songs content"},z={class:"songlist_buttons_box"},Q={class:"songlist_buttons"},R=s("div",{class:"icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22",class:""},[s("g",null,[s("path",{d:"M2.36807692,21.8609375 C2.91885817,21.8609375 3.41104567,21.696875 4.07901442,21.3101562 L18.2118269,13.11875 C19.2899519,12.4859375 19.8524519,11.8882812 19.8524519,10.9507812 C19.8524519,10.0132812 19.2899519,9.415625 18.2118269,8.79453125 L4.07901442,0.59140625 C3.41104567,0.2046875 2.91885817,0.040625 2.36807692,0.040625 C1.24307692,0.040625 0.317295673,0.89609375 0.317295673,2.3375 L0.317295673,19.5640625 C0.317295673,21.0054687 1.24307692,21.8609375 2.36807692,21.8609375 Z"})])])],-1),j=s("p",{class:"text"},"播放歌单",-1),A=[R,j],F={class:"icon"},G={width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(2.2)"}},J=s("path",{d:"M20.767 20.44a.81.81 0 00.49-.183l2.58-2.174c.316-.266.316-.681 0-.955l-2.58-2.183a.81.81 0 00-.49-.183c-.415 0-.673.258-.673.673v1.245h-1.162c-.739 0-1.195-.233-1.718-.847l-1.527-1.801 1.527-1.81c.54-.63.946-.847 1.677-.847h1.203v1.279c0 .407.258.664.673.664a.801.801 0 00.49-.174l2.58-2.175c.316-.266.316-.69 0-.955l-2.58-2.183a.761.761 0 00-.49-.183c-.415 0-.673.258-.673.665v1.386h-1.212c-1.228 0-1.992.34-2.863 1.386l-1.412 1.668-1.469-1.751c-.805-.946-1.569-1.303-2.747-1.303H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.437c.697 0 1.162.225 1.685.847l1.519 1.801-1.52 1.81c-.53.623-.954.847-1.643.847H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.536c1.179 0 1.901-.356 2.706-1.303l1.478-1.751 1.444 1.718c.822.98 1.627 1.336 2.822 1.336h1.212v1.412c0 .415.258.672.673.672z"},null,-1),K=[J],P=s("p",{class:"text"},"随机播放",-1),U={class:"songlist_loading"},W={class:"songlist_top"},X=s("h3",{class:"section_title"},"全部歌曲",-1),Y={class:"songlist_count"},ss={class:"songlist_content"},ts={class:"songlist_songs"},es={key:0,class:"songlist_pagination blur_part"},g=100,hs={__name:"songs",setup(os){const t=C(),o=a(null),c=a("loading"),r=k(),i=a(0),l=a(r.query.page?parseInt(r.query.page):1);v(l.value,!1),$(()=>r.query.page,e=>{l.value=e?parseInt(e):1,v(l.value,!0)});const p=a(1),h=a(null);async function v(e,m){c.value="loading";const d=await M("/archive/music/get_songs.php",{page:e});if(d.status!="success"){c.value="error";return}m&&B(h.value),c.value="success",o.value=[],p.value=(l.value-1)*g+1;const b=d.data.songs;i.value=parseInt(d.data.count),b.forEach(y=>{o.value.push(T(y))})}function w(){o.value&&(t.queue=[],o.value.forEach(e=>{t.queue.indexOf(e)==-1&&t.queue.push(e)}),t.current_song=t.queue[0],t.current_song_index=0,x({message:"已替换播放队列为本页歌曲"}))}function q(){o.value&&(t.queue=[],o.value.forEach(e=>{t.queue.indexOf(e)==-1&&t.queue.push(e)}),t.queue.sort(()=>Math.random()-.5),t.current_song=t.queue[0],t.current_song_index=0,x({message:"已替换播放队列为本页歌曲 (随机排序)"}))}return(e,m)=>(u(),_("div",Z,[n(N,{title:"歌曲库",parent:{title:e.$text("nav.archive.music"),link:"/archive/music"}},null,8,["parent"]),s("div",z,[s("div",Q,[s("button",{class:"action_button",onClick:w},A),s("button",{class:"action_button",onClick:q},[s("div",F,[(u(),_("svg",G,K))]),P])])]),o.value?(u(),_("div",{key:0,class:"songlist_box section",ref_key:"songlist_box",ref:h},[n(V,{name:"loading_fade"},{default:E(()=>[H(s("div",U,[n(L,{loading:""})],512),[[I,c.value=="loading"]])]),_:1}),s("div",W,[X,s("p",Y,D(i.value),1)]),s("div",ss,[s("div",ts,[n(O,{songs_data:o.value,start_index:p.value},null,8,["songs_data","start_index"]),i.value>g?(u(),_("div",es,[n(S,{max_page:Math.ceil(i.value/g)},null,8,["max_page"])])):f("",!0)])])],512)):f("",!0)]))}};export{hs as default};
