import{Y as m,a3 as B,o as v,d as b,e as _,f as y,n as x}from"./index-539a8d41.js";const J={class:"ZoomableImg"},O=["src","alt"],T=["src","alt"],q=_("div",{class:"full_view_overlay_box blur_part"},null,-1),F={class:"full_screen_box"},I=["src"],R={class:"zoomable_img_to"},Z=["src"],E={__name:"ZoomableImg",props:{src:{type:String,required:!0},alt:{type:String,default:"image"},border_radius:{type:String,default:"0"},fit:{type:String,default:"unset"}},setup(n){const f=n,l=m("closed");let g=null;const w=m(null),p=m(null);function h(){const t=JSON.parse(JSON.stringify(w.value.getBoundingClientRect())),o=JSON.parse(JSON.stringify(p.value.getBoundingClientRect())),e={width:t.width,height:t.height,left:t.left,top:t.top,actual_width:t.width,actual_height:t.height,actual_left:t.left,actual_top:t.top,left_right_margin:0,top_bottom_margin:0},a=o.width/o.height,c=t.width/t.height;if(f.fit=="cover")if(a>c){const i=t.height*a,s=(i-t.width)/2;e.actual_width=i,e.left_right_margin=s,e.actual_left=t.left-s}else{const i=t.width/a,s=(i-t.height)/2;e.actual_height=i,e.top_bottom_margin=s,e.actual_top=t.top-s}return e}function $(){const t=JSON.parse(JSON.stringify(p.value.getBoundingClientRect()));return{width:t.width,height:t.height,left:t.left,top:t.top}}const u=m({}),r=m({});function S(){const t=h(),o=$(),e=t.actual_left-o.left,a=t.actual_top-o.top,c=t.actual_width/o.width,i=t.actual_height/o.height,s={left:t.left_right_margin/c,right:t.left_right_margin/c,top:t.top_bottom_margin/i,bottom:t.top_bottom_margin/i};return{"clip-path":`inset(${s.top}px ${s.right}px ${s.bottom}px ${s.left}px round calc(${f.border_radius} / ${c}) )`,transform:`translate(${e}px, ${a}px) scale(${c}, ${i})`}}function k(){return{"clip-path":"inset(0 0 0 0 round 0)",transform:"translate(0, 0) scale(1, 1)"}}function C(){const t=h(),o=$(),e=o.width/t.actual_width,a=o.height/t.actual_height,c=o.left-t.actual_left,i=o.top-t.actual_top;return{left:-t.left_right_margin+"px",right:-t.left_right_margin+"px",top:-t.top_bottom_margin+"px",bottom:-t.top_bottom_margin+"px","clip-path":"inset(0 0 0 0 round 0)",transform:`translate(${c}px, ${i}px) scale(${e}, ${a})`}}function d(){const t=h(),o={left:t.left_right_margin,right:t.left_right_margin,top:t.top_bottom_margin,bottom:t.top_bottom_margin};return{left:-t.left_right_margin+"px",right:-t.left_right_margin+"px",top:-t.top_bottom_margin+"px",bottom:-t.top_bottom_margin+"px","clip-path":`inset(${o.top}px ${o.right}px ${o.bottom}px ${o.left}px round calc(${f.border_radius}) )`,transform:"translate(0, 0) scale(1, 1)"}}B(()=>{r.value=d()});function N(){if(l.value==="opning"||l.value==="opened")return;const t=S(),o=k(),e=d(),a=C();u.value={opacity:0,...t},r.value={opacity:1,...e},requestAnimationFrame(()=>{u.value={transition:".5s, opacity 0.25s",opacity:1,...o},r.value={transition:".5s, opacity 0.25s 0.25s",opacity:0,...a}}),l.value="opening",clearTimeout(g),g=setTimeout(()=>{l.value="opened"},500)}function z(){if(l.value==="closing"||l.value==="closed")return;const t=S(),o=k(),e=C(),a=d();l.value==="opened"&&(u.value={opacity:1,...o},r.value={opacity:0,...e}),requestAnimationFrame(()=>{u.value={transition:"0.5s, opacity 0.25s 0.25s",opacity:0,...t},r.value={transition:"0.5s, opacity 0.25s",opa1city:1,...a}}),l.value="closing",clearTimeout(g),g=setTimeout(()=>{l.value="closed"},500)}return(t,o)=>(v(),b("div",J,[_("img",{class:y(["zoomable_img_item",l.value]),ref_key:"small_img_el",ref:w,src:n.src,alt:n.alt,style:x({objectFit:n.fit,clipPath:"inset(0 0 0 0 round "+n.border_radius+")"}),onClick:N},null,14,O),(v(),b("div",{key:0,class:y(["small_trans_box",l.value]),style:x(r.value)},[_("img",{onClick:N,class:"zoomable_img_main",src:n.src,alt:n.alt},null,8,T)],6)),_("div",{class:y(["zoomable_img_full",l.value]),onClick:z},[q,_("div",F,[(v(),b("div",{key:0,class:"full_trans_box",style:x(u.value)},[_("img",{src:n.src},null,8,I)],4))]),_("div",R,[_("img",{src:n.src,ref_key:"full_img_el",ref:p},null,8,Z)])],2)]))}};export{E as _};
