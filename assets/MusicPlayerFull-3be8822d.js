import{_ as E,af as D,am as G,aA as W,aB as I,au as g,r as x,o as r,d as i,e as s,g as u,w as h,l as $,t as v,f as k,T as M,j,a8 as R,a6 as Z,a7 as J,F as q,i as S,n as b,p,aF as K,h as d,k as T,aG as A,S as N,G as O,a3 as X,ak as ee,av as te,aq as se,as as _e,aH as ne,aI as oe,aJ as re,Q as y,aK as C,H as ie,I as ce,V as le}from"./index-b17261da.js";import{p as ae,a as ue,b as he}from"./parse_colored_row_lrc-4bdcb06e.js";import{P as de}from"./Play-3ef5235b.js";const ge={components:{Popper:D,FormSlide:G,SwitchSongButton:W,VolumeButton:I},data(){return{mute_volume:.4}},computed:{Music:()=>g(),is_playing(){return g().current_song_state=="playing"},no_song(){return this.Music.queue.length==0},no_prev_song(){return this.Music.queue.length==0||this.Music.current_song_index==-1?!0:(this.Music.settings.next_song="list")?this.Music.current_song_index==0:!1},no_next_song(){return this.Music.queue.length==0||this.Music.current_song_index==-1?!0:(this.Music.settings.next_song="list")?this.Music.current_song_index==this.Music.queue.length-1:!1}},methods:{play_pause(){this.Music.play_pause()},seek_to_begin(){this.Music.seek_to_begin()},play_prev_song(){this.Music.play_prev_song()},play_next_song(){this.Music.play_next_song()},stop_play_song(){this.Music.stop_play_song()},open_settings(){this.Music.open.settings=!0},open_lrc(){this.Music.open.lrc=!0},open_meta(){this.Music.open.meta=!0}}},we={class:"song_buttons_box"},ve={class:"song_buttons_left"},me={class:"song_buttons_center"},pe=s("span",null,[$("上一首 "),s("kbd",null,"PageUp")],-1),fe={key:0,class:"main_button_img"},ye=s("svg",{class:"loading_icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},[s("path",{d:"M512 322.56a35.84 35.84 0 0 1-35.84-35.84V102.4a35.84 35.84 0 1 1 71.68 0v184.32a35.84 35.84 0 0 1-35.84 35.84zM512 957.44a35.84 35.84 0 0 1-35.84-35.84v-184.32a35.84 35.84 0 1 1 71.68 0v184.32a35.84 35.84 0 0 1-35.84 35.84zM645.95456 378.04544a35.83488 35.83488 0 0 1 0-50.68288l130.33472-130.33472a35.83488 35.83488 0 0 1 50.68288 0 35.83488 35.83488 0 0 1 0 50.68288l-130.33472 130.33472a35.83488 35.83488 0 0 1-50.68288 0zM197.02784 826.97216a35.83488 35.83488 0 0 1 0-50.68288l130.33472-130.33472a35.83488 35.83488 0 0 1 50.68288 0 35.83488 35.83488 0 0 1 0 50.68288l-130.33472 130.33472a35.83488 35.83488 0 0 1-50.68288 0zM701.44 512a35.84 35.84 0 0 1 35.84-35.84h184.32a35.84 35.84 0 1 1 0 71.68h-184.32a35.84 35.84 0 0 1-35.84-35.84zM66.56 512a35.84 35.84 0 0 1 35.84-35.84h184.32a35.84 35.84 0 1 1 0 71.68H102.4a35.84 35.84 0 0 1-35.84-35.84zM645.95456 645.95456a35.83488 35.83488 0 0 1 50.68288 0l130.33472 130.33472a35.83488 35.83488 0 0 1 0 50.68288 35.83488 35.83488 0 0 1-50.68288 0l-130.33472-130.33472a35.83488 35.83488 0 0 1 0-50.68288zM197.02784 197.02784a35.83488 35.83488 0 0 1 50.68288 0l130.33472 130.33472a35.83488 35.83488 0 0 1 0 50.68288 35.83488 35.83488 0 0 1-50.68288 0L197.02784 247.71072a35.83488 35.83488 0 0 1 0-50.68288z"})],-1),xe=[ye],ke={key:1,class:"main_button_img"},be=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22"},[s("g",null,[s("path",{d:"M6.46183594,21.9527344 C7.83292969,21.9527344 8.53117187,21.2544922 8.53117187,19.8833984 L8.53117187,2.09726563 C8.53117187,0.726171875 7.83292969,0.066015625 6.46183594,0.0279296875 L3.31339844,0.0279296875 C1.94230469,0.0279296875 1.2440625,0.726171875 1.2440625,2.09726563 L1.2440625,19.8833984 C1.21867187,21.2544922 1.91691406,21.9527344 3.31339844,21.9527344 L6.46183594,21.9527344 Z M16.8466016,21.9527344 C18.2303906,21.9527344 18.9159375,21.2544922 18.9159375,19.8833984 L18.9159375,2.09726563 C18.9159375,0.726171875 18.2303906,0.0279296875 16.8466016,0.0279296875 L13.6981641,0.0279296875 C12.3270703,0.0279296875 11.6288281,0.726171875 11.6288281,2.09726563 L11.6288281,19.8833984 C11.6288281,21.2544922 12.3016797,21.9527344 13.6981641,21.9527344 L16.8466016,21.9527344 Z"})])],-1),Me=[be],qe={key:2,class:"main_button_img"},Se=s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22"},[s("g",null,[s("path",{d:"M2.36807692,21.8609375 C2.91885817,21.8609375 3.41104567,21.696875 4.07901442,21.3101562 L18.2118269,13.11875 C19.2899519,12.4859375 19.8524519,11.8882812 19.8524519,10.9507812 C19.8524519,10.0132812 19.2899519,9.415625 18.2118269,8.79453125 L4.07901442,0.59140625 C3.41104567,0.2046875 2.91885817,0.040625 2.36807692,0.040625 C1.24307692,0.040625 0.317295673,0.89609375 0.317295673,2.3375 L0.317295673,19.5640625 C0.317295673,21.0054687 1.24307692,21.8609375 2.36807692,21.8609375 Z"})])],-1),Le=[Se],Ae=s("kbd",null,"空格",-1),Ce=s("span",null,[$("下一首 "),s("kbd",null,"PageDown")],-1),Te={class:"song_buttons_right"},ze=s("svg",{t:"1690432415262",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2524",width:"200",height:"200"},[s("path",{d:"M227.14123 413.647995c-52.14973 0-94.587262 42.439578-94.587262 94.587262 0 52.14973 42.437531 94.587262 94.587262 94.587262 52.147684 0 94.587262-42.437531 94.587262-94.587262C321.728492 456.087573 279.288914 413.647995 227.14123 413.647995z"}),s("path",{d:"M510.903016 413.647995c-52.14973 0-94.587262 42.439578-94.587262 94.587262 0 52.14973 42.437531 94.587262 94.587262 94.587262 52.147684 0 94.587262-42.437531 94.587262-94.587262C605.490278 456.087573 563.051723 413.647995 510.903016 413.647995z"}),s("path",{d:"M794.665825 413.647995c-52.14973 0-94.587262 42.439578-94.587262 94.587262 0 52.14973 42.437531 94.587262 94.587262 94.587262 52.147684 0 94.587262-42.437531 94.587262-94.587262C889.253086 456.087573 846.813508 413.647995 794.665825 413.647995z"})],-1),Be=[ze],He=s("hr",null,null,-1);function Ee(e,t,o,c,n,_){const f=x("VolumeButton"),a=x("SwitchSongButton"),l=x("Popper");return r(),i("div",we,[s("div",ve,[u(f)]),s("div",me,[u(l,{placement:"top"},{dropdown:h(()=>[pe]),default:h(()=>[u(a,{onClick:t[0]||(t[0]=w=>_.play_prev_song()),class:"song_button play_prev_song_button",unavailable:_.no_prev_song},null,8,["unavailable"])]),_:1}),u(l,{placement:"top"},{dropdown:h(()=>[s("span",null,[$(v(_.is_playing?"暂停":"播放")+" ",1),Ae])]),default:h(()=>[s("button",{class:k(["song_button main_button",{unavailable:_.no_song}]),onClick:t[1]||(t[1]=w=>_.play_pause())},[u(M,{name:"play_pause_transition"},{default:h(()=>[_.Music.current_song_state=="loading"?(r(),i("div",fe,xe)):_.Music.current_song_state=="playing"?(r(),i("div",ke,Me)):(r(),i("div",qe,Le))]),_:1})],2)]),_:1}),u(l,{placement:"top"},{dropdown:h(()=>[Ce]),default:h(()=>[u(a,{onClick:t[2]||(t[2]=w=>_.play_next_song()),class:"song_button play_next_song_button",unavailable:_.no_next_song},null,8,["unavailable"])]),_:1})]),s("div",Te,[u(l,{placement:"top",clickable:"",click_close:""},{dropdown:h(()=>[s("a",{onClick:t[4]||(t[4]=w=>_.open_meta())},"歌曲元数据"),s("a",{onClick:t[5]||(t[5]=w=>_.open_lrc())},"原始歌词文件"),He,s("a",{onClick:t[6]||(t[6]=w=>_.open_settings())},"播放器设置")]),default:h(()=>[s("button",{onClick:t[3]||(t[3]=w=>_.open_settings()),class:"button_out"},Be)]),_:1})])])}const $e=E(ge,[["render",Ee]]);const Pe=["innerHTML"],Ve={__name:"SongLrcAniWords",props:["words"],setup(e){const t=g(),o=j({name:"word_scroll_1",play_state:"running",start_time:0});function c(){o.name=="word_scroll_1"?o.name="word_scroll_2":o.name="word_scroll_1",o.start_time=t.playing_current_time}R(()=>t.current_song_state,_=>{_=="playing"?(o.play_state="running",c()):(o.play_state="paused",c())},{immediate:!0}),R(()=>t.playing_current_time,_=>{o.play_state=="paused"&&(o.start_time=_)});function n(){document.visibilityState=="visible"&&c()}return Z(()=>{document.addEventListener("visibilitychange",n)}),J(()=>{document.removeEventListener("visibilitychange",n)}),(_,f)=>(r(),i("div",{class:"text_row SongLrcAniWords",style:b({"--ani-name":o.name,"--ani-play-state":o.play_state,"--ani-delay-row":p(t).settings.lrc_row_offset*1+p(t).settings.lrc_word_offset*1-o.start_time+"s"})},[(r(!0),i(q,null,S(e.words,a=>(r(),i("div",{class:"text_word",style:b({"--ani-duration":a.w_duration+"s","--ani-delay-word":a.w_start*1+"s"}),innerHTML:a.w_text},null,12,Pe))),256))],4))}};const Fe=["id"],Ye={class:"time_box"},Re=s("span",{class:"time_box_play"},"▶︎",-1),De={class:"time_box_text"},Ze={key:0,class:"text_row"},Ne=["chara_id"],Ue={class:"colored_part_label"},Qe=["innerHTML"],Ge=["innerHTML"],We={key:1,class:"translate_row"},Ie=["chara_id"],je={class:"colored_part_label"},Je=["innerHTML"],Ke=["innerHTML"],Oe={key:2,class:"empty_row"},Xe=s("span",{class:"circle1"},null,-1),et=s("span",{class:"circle2"},null,-1),tt=s("span",{class:"circle3"},null,-1),st=[Xe,et,tt],_t=["innerHTML"],nt={key:1,class:"text_row lrc_word_scroll"},ot=["innerHTML"],rt={key:2,class:"roma_row"},it={key:3,class:"translate_row"},ct={key:4,class:"empty_row"},lt=s("span",{class:"circle1"},null,-1),at=s("span",{class:"circle2"},null,-1),ut=s("span",{class:"circle3"},null,-1),ht=[lt,at,ut],dt={__name:"SongLrcRow",props:["row","row_id","row_style","current_lrc_row","index","active_lrc_type","active_lrc_chara","click_lrc_row"],setup(e){const t=g();return(o,c)=>(r(),i("div",{class:k(["SongLrcRow",{visited:e.current_lrc_row>e.index+1,last_visited:e.current_lrc_row==e.index+1,visiting:e.current_lrc_row==e.index,unvisited:e.current_lrc_row<e.index}]),key:e.row_id+e.row.time,id:e.row_id,style:b(e.row_style)},[s("div",Ye,[s("p",{onClick:c[0]||(c[0]=n=>e.click_lrc_row(e.row))},[Re,s("span",De,v(p(K)(e.row.time+p(t).settings.lrc_row_offset*1)),1)])]),e.active_lrc_type=="colored"?(r(),i("div",{key:0,class:"text_box colored_text_box",style:b({filter:"blur("+Math.min(Math.abs(e.current_lrc_row-e.index),3)*.03+"em)"})},[e.row.text?(r(),i("p",Ze,[(r(!0),i(q,null,S(e.row.text,n=>(r(),i("span",{class:"colored_part",chara_id:n.chara_id,style:b({"--chara-color":e.active_lrc_chara[n.chara_id].color,"--chara-text-color":e.active_lrc_chara[n.chara_id].text_color})},[s("p",Ue,v(e.active_lrc_chara[n.chara_id].name),1),s("p",{class:"colored_part_text border",innerHTML:n.text},null,8,Qe),s("p",{class:"colored_part_text text",innerHTML:n.text},null,8,Ge)],12,Ne))),256))])):d("",!0),e.row.translate?(r(),i("p",We,[(r(!0),i(q,null,S(e.row.translate,n=>(r(),i("span",{class:"colored_part",chara_id:n.chara_id,style:b({"--chara-color":e.active_lrc_chara[n.chara_id].color,"--chara-text-color":e.active_lrc_chara[n.chara_id].text_color})},[s("p",je,v(e.active_lrc_chara[n.chara_id].name),1),s("p",{class:"colored_part_text border",innerHTML:n.text},null,8,Je),s("p",{class:"colored_part_text text",innerHTML:n.text},null,8,Ke)],12,Ie))),256))])):d("",!0),e.row.text&&e.row.text.length==0&&e.row.translate&&e.row.translate.length==0?(r(),i("p",Oe,st)):d("",!0)],4)):(r(),i("div",{key:1,class:"text_box",style:b({filter:"blur("+Math.min(Math.abs(e.current_lrc_row-e.index),3)*.03+"em)"})},[e.row.text&&e.active_lrc_type=="row"?(r(),i("p",{key:0,class:"text_row lrc_row_scroll",innerHTML:e.row.text},null,8,_t)):d("",!0),u(M,{name:"ani_word_trans"},{default:h(()=>[e.active_lrc_type=="word"&&(e.current_lrc_row==e.index||e.current_lrc_row==e.index+1)?(r(),T(Ve,{key:0,words:e.row.words},null,8,["words"])):d("",!0)]),_:1}),e.row.text&&e.active_lrc_type=="word"?(r(),i("div",nt,[(r(!0),i(q,null,S(e.row.words,n=>(r(),i("div",{class:"text_word",innerHTML:n.w_text},null,8,ot))),256))])):d("",!0),e.row.roma?(r(),i("p",rt,v(e.row.roma),1)):d("",!0),e.row.translate?(r(),i("p",it,v(e.row.translate),1)):d("",!0),!e.row.text&&!e.row.translate?(r(),i("p",ct,ht)):d("",!0)],4))],14,Fe))}};function gt(e,t=100){let o=!1;return function(...c){o||(e(...c),o=!0,setTimeout(()=>{o=!1},t))}}function wt(e){var _,f;const c=new DOMParser().parseFromString(e,"application/xml").getElementsByTagName("p"),n=[];for(let a=0;a<c.length;a++){const l=c[a],w=A(l.getAttribute("begin")),z=A(l.getAttribute("end"))-w;let L="";const m=[],V=l.querySelectorAll("span[begin]");for(let B=0;B<V.length;B++){const H=V[B],F=A(H.getAttribute("begin")),Q=A(H.getAttribute("end"))-F,Y=(_=H.textContent)==null?void 0:_.replaceAll(" ","&nbsp;");m.push({w_start:F,w_duration:Q,w_text:Y||""}),L+=Y}const U=(f=l.querySelector('span[*|role="x-translation"]'))==null?void 0:f.textContent;n.push({time:w,duration:z,text:L,words:m,translate:U||""})}return n}const vt={components:{ScrollBox:N,SongLrcRow:dt},data(){return{active_lrc:null,active_lrc_type:null,box_height:0,active_lrc_total_height:0,active_lrc_offsets:[],active_lrc_heights:[],active_lrc_rows_style:[],active_lrc_offset:0,scroll_box_top:0,active_lrc_chara:[],user_scroll_active:!1,user_scroll_return_timer:0,current_lrc_row:-1,no_song:!0,lrc_container_scroll_direction:"up",update_lrc_rows_style_available:!0,update_lrc_rows_style_request:!1,d_update_lrc_heights:null}},props:["show_queue","show_lrc"],computed:{Music(){return g()},settings(){return g().settings},song(){return g().current_song},current_time(){return g().playing_current_time}},watch:{song:{immediate:!0,handler(e){if(this.active_lrc=null,this.active_lrc_type=null,this.current_lrc_row=-1,this.user_scroll_active=!1,e==null){this.no_song=!0;return}this.no_song=!1,this.song.lrc.ready&&this.parse_lrc()}},"song.lrc.ready"(e){e&&this.parse_lrc()},active_lrc(e){this.active_lrc_offsets=[],this.active_lrc_rows_style=[],this.active_lrc_heights=[],e!=null&&this.$nextTick(()=>{this.update_lrc_heights()})},current_time(){this.update_current_lrc_row()},current_lrc_row(e,t){this.active_lrc&&this.$nextTick(()=>{this.update_lrc_rows_style()})},"settings.show_translate"(){this.$nextTick(()=>{this.update_lrc_heights()})},"settings.show_roma"(){this.$nextTick(()=>{this.update_lrc_heights()})},"settings.show_ruby"(){this.$nextTick(()=>{this.update_lrc_heights()})},"settings.word_lrc"(){this.parse_lrc()},"settings.colored_lrc"(){this.parse_lrc()},show_queue(){this.show_lrc&&this.$nextTick(()=>{this.update_lrc_heights(),this.update_current_lrc_row()})},show_lrc(){this.show_lrc&&this.$nextTick(()=>{this.update_lrc_heights(),this.update_current_lrc_row()})}},beforeMount(){this.update_current_lrc_row(),this.d_update_lrc_heights=gt(this.update_lrc_heights,200)},mounted(){window.addEventListener("resize",this.listen_resize)},beforeUnmount(){window.removeEventListener("resize",this.listen_resize),clearTimeout(this.user_scroll_return_timer)},methods:{parse_lrc(){if(!this.song.lrc.ready)return;const e=this.song.lrc_data;this.$nextTick(()=>{this.update_lrc_heights()});let t=0;for(;t<e.length;){const o=e[t].data;switch(e[t].type){case"colored":if(this.settings.colored_lrc){const n=he(o.chara,o.line_time,o.text,o.trans);this.active_lrc=n.rows,this.active_lrc_chara=n.characters,this.active_lrc_type="colored";return}break;case"ttml":if(this.settings.word_lrc){this.active_lrc=wt(o.text),this.active_lrc_type="word";return}break;case"word":if(this.settings.word_lrc){this.active_lrc=ue(o.text,o.trans,o.roma),this.active_lrc_type="word";return}break;case"row":this.active_lrc=ae(o.text,o.trans,o.roma),this.active_lrc_type="row";return;case"plain_text":this.parse_plain_text_lrc(o.text);return}t++}this.active_lrc=[],this.active_lrc_type="empty"},parse_plain_text_lrc(e){let t=[];e.split(`
`).forEach(o=>{let c={text:o||"<br />"};t.push(c)}),this.active_lrc=t,this.active_lrc_type="plain_text"},update_lrc_heights(){if(!this.active_lrc||!this.show_lrc||!this.$refs.song_lrc||this.$refs.song_lrc.clientHeight==0)return;this.box_height=this.$refs.song_lrc.clientHeight;let e=[],t=0,o=[];for(let c=0;c<this.active_lrc.length;c++){let n=document.getElementById("lrc_row_"+c),_=0;n&&(_=n.clientHeight),e.push(_),t+=_,o.push(t)}this.active_lrc_total_height=t,this.active_lrc_offsets=o,this.active_lrc_heights=e,this.$nextTick(()=>{this.update_lrc_rows_style()})},update_lrc_rows_style(){if(!this.update_lrc_rows_style_available){this.update_lrc_rows_style_request=!0;return}if(this.update_lrc_rows_style_available=!1,setTimeout(()=>{this.update_lrc_rows_style_available=!0,this.update_lrc_rows_style_request&&(this.update_lrc_rows_style_request=!1,this.update_lrc_rows_style())},200),!this.active_lrc||!this.show_lrc||this.user_scroll_active)return;const e=this.active_lrc_offset;this.current_lrc_row>0&&this.active_lrc_offsets[this.current_lrc_row-1]?this.active_lrc_offset=this.active_lrc_offsets[this.current_lrc_row-1]:this.active_lrc_offset=0,this.scroll_box_top=this.active_lrc_offset,this.lrc_container_scroll_direction_fixed||(this.active_lrc_offset>e?this.lrc_container_scroll_direction="up":this.active_lrc_offset<e&&(this.lrc_container_scroll_direction="down"));let t=[];for(let o=0;o<this.active_lrc.length;o++){let c={};c["--row-index"]=o;let n=0;o>0&&(n=this.active_lrc_offsets[o-1]),c["--row-top"]=(this.box_height*.3+n).toFixed(1)+"px",t.push(c)}this.active_lrc_rows_style=t},update_current_lrc_row(){if(!this.active_lrc||!document.querySelector("audio"))return;let e=Math.round(document.querySelector("audio").currentTime*1e3),t=this.active_lrc.length;for(let o=0;o<this.active_lrc.length;o++)if(e<Math.round((this.active_lrc[o].time+this.Music.settings.lrc_row_offset*1)*1e3)){t=o;break}this.current_lrc_row=t-1},click_lrc_row(e){this.Music.seek_to_time(e.time*1+this.Music.settings.lrc_row_offset*1),this.user_scroll_return()},listen_resize(){this.d_update_lrc_heights(),setTimeout(()=>{this.d_update_lrc_heights()},1e3)},user_scroll_start(){clearTimeout(this.user_scroll_return_timer),this.user_scroll_active=!0},user_scroll_end_request(){clearTimeout(this.user_scroll_return_timer),this.user_scroll_return_timer=setTimeout(this.user_scroll_return,2e3)},user_scroll_end_cancel(){clearTimeout(this.user_scroll_return_timer)},user_scroll_return(){this.user_scroll_active=!1,this.scroll_box_top=this.active_lrc_offset,this.$nextTick(()=>{this.update_lrc_rows_style()})},on_lrc_scroll(e){this.user_scroll_active&&(this.active_lrc_offset=e.scroll_top)}}},mt=s("p",null,"回到当前位置",-1),pt=[mt],ft={key:0,class:"lrc_rows_not_playing"},yt={key:1,class:"lrc_rows_not_playing"},xt={key:2,class:"lrc_rows_not_playing"},kt=s("h2",null,"没有歌词",-1),bt=[kt],Mt={key:3,class:"lrc_rows_plain_text"},qt=s("div",{style:{height:"100px"}},null,-1),St=["innerHTML"],Lt=s("div",{style:{height:"100px"}},null,-1);function At(e,t,o,c,n,_){const f=x("ScrollBox"),a=x("SongLrcRow");return r(),i("div",{class:"song_lrc",onWheelPassive:t[2]||(t[2]=(...l)=>_.user_scroll_start&&_.user_scroll_start(...l)),onMouseleavePassive:t[3]||(t[3]=(...l)=>_.user_scroll_end_request&&_.user_scroll_end_request(...l)),onMouseenterPassive:t[4]||(t[4]=(...l)=>_.user_scroll_end_cancel&&_.user_scroll_end_cancel(...l))},[u(M,{name:"user_scroll_box_appear"},{default:h(()=>[n.user_scroll_active?(r(),i("div",{key:0,class:"user_scroll_box blur_part",onClick:t[0]||(t[0]=(...l)=>_.user_scroll_return&&_.user_scroll_return(...l))},pt)):d("",!0)]),_:1}),s("div",{class:k(["song_lrc_box",{center:_.settings.lrc_align=="center",hide_tanslate:!_.settings.show_translate,hide_roma:!_.settings.show_roma,hide_ruby:!_.settings.show_ruby}]),ref:"song_lrc",onTouchstartPassive:t[1]||(t[1]=(...l)=>_.user_scroll_start&&_.user_scroll_start(...l))},[n.no_song?(r(),i("div",ft,[s("h2",null,v(e.$text("player.not_playing")),1)])):n.active_lrc?n.active_lrc.length==0?(r(),i("div",xt,bt)):n.active_lrc_type=="plain_text"?(r(),i("div",Mt,[u(f,null,{default:h(()=>[qt,(r(!0),i(q,null,S(n.active_lrc,l=>(r(),i("p",{class:"lrc_plain_text_row",innerHTML:l.text},null,8,St))),256)),Lt]),_:1})])):(r(),i(q,{key:4},[u(f,{class:k(["song_lrc_scroll_box",{user_scroll_inactive:!n.user_scroll_active}]),onBox_scroll:_.on_lrc_scroll,top:n.scroll_box_top},{default:h(()=>[s("div",{class:"scroll_box_lrc",style:b({height:n.active_lrc_total_height+n.box_height+"px"})},null,4)]),_:1},8,["onBox_scroll","top","class"]),s("div",{class:k(["song_lrc_display_rows",{user_scrolling:n.user_scroll_active,scrolling_down:n.lrc_container_scroll_direction=="down",scrolling_up:n.lrc_container_scroll_direction=="up"}]),style:b({"--lrc-offset":n.active_lrc_offset+"px","--visiting-row-index":n.current_lrc_row})},[(r(!0),i(q,null,S(n.active_lrc,(l,w)=>(r(),T(a,{key:l.time+"-"+w,row:l,row_id:"lrc_row_"+w,row_style:n.active_lrc_rows_style[w],current_lrc_row:n.current_lrc_row,index:w,active_lrc_type:n.active_lrc_type,active_lrc_chara:n.active_lrc_chara,click_lrc_row:_.click_lrc_row},null,8,["row","row_id","row_style","current_lrc_row","index","active_lrc_type","active_lrc_chara","click_lrc_row"]))),128))],6)],64)):(r(),i("div",yt))],34)],32)}const Ct=E(vt,[["render",At]]);const Tt=s("div",{style:{height:"20px"}},null,-1),zt={class:"queue_empty"},Bt=["onClick"],Ht={class:"song_index_box"},Et={class:"song_index_num"},$t={class:"song_index_play"},Pt={key:0,class:"song_index_playing"},Vt=s("div",{class:"playing_bar bar1"},null,-1),Ft=s("div",{class:"playing_bar bar2"},null,-1),Yt=s("div",{class:"playing_bar bar3"},null,-1),Rt=s("div",{class:"playing_bar bar4"},null,-1),Dt=s("div",{class:"playing_bar bar5"},null,-1),Zt=[Vt,Ft,Yt,Rt,Dt],Nt={class:"song_text"},Ut={class:"song_title"},Qt=["title"],Gt=["title"],Wt={key:0,class:"song_text_tail"},It=["title"],jt={key:1,class:"song_duration"},Jt=["onClick"],Kt=s("div",{style:{height:"20px"}},null,-1),Ot={__name:"SongQueue",props:{editing_queue:Boolean},setup(e){const t=e,o=g();function c(_){t.editing_queue||o.play_pause_song_in_queue(_)}const n=O(0);return Z(()=>{n.value=o.current_song_index*56}),(_,f)=>(r(),T(N,{top:n.value},{default:h(()=>[Tt,s("div",zt,[u(X,{empty:p(o).queue&&p(o).queue.length==0,empty_title:"没有歌曲",loading:!p(o).queue},null,8,["empty","loading"])]),u(ee,{name:"queue_trans"},{default:h(()=>[(r(!0),i(q,null,S(p(o).queue,(a,l)=>(r(),i("div",{class:"queue_item_box",key:a.song_key},[s("div",{class:k(["queue_item",{current:l==p(o).current_song_index,playing:l==p(o).current_song_index&&p(o).current_song_state=="playing"}]),onClick:w=>c(l)},[s("div",Ht,[s("p",Et,v(l+1),1),s("div",$t,[u(de)]),l==p(o).current_song_index?(r(),i("div",Pt,Zt)):d("",!0)]),s("div",Nt,[s("div",Ut,[s("p",{title:a.title},v(a.title),9,Qt),a._title_cn&&p(o).settings.show_translate?(r(),i("p",{key:0,class:"song_title_cn",title:a._title_cn},v(a._title_cn),9,Gt)):d("",!0)])]),a._artists_name||a.song_duration>0?(r(),i("div",Wt,[a._artists_name?(r(),i("p",{key:0,class:"song_artist",title:a._artists_name},v(a._artists_name),9,It)):d("",!0),a.song_duration>0?(r(),i("p",jt,v(p(te)(a.song_duration)),1)):d("",!0)])):d("",!0),s("button",{class:"remove_button_box",onClick:se(w=>p(o).remove_song(a.song_key),["stop"])},[u(_e)],8,Jt)],10,Bt)]))),128))]),_:1}),Kt]),_:1},8,["top"]))}};const Xt={components:{Popper:D,SongBar:ne,SongButtons:$e,SongLrc:Ct,SongQueue:Ot,SongTitles:oe,SongCover:re},props:{closeable:{type:Boolean,default:!1},with_header:{type:Boolean,default:!1},modelValue:{type:Number,default:100}},emits:["update:modelValue"],data(){return{narrow_window:!0,bg_url:"",editing_queue:!1,close_data:{start_position:0,last_move_position:0,move_direction:0}}},computed:{appear_percent:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},Music(){return g()},queue(){return g().queue},settings(){return g().settings},song(){return g().current_song},volume:{get(){return g().settings.volume*1},set(e){g().settings.volume=e*1}},show_lrc:{get(){return g().full_player_show.lrc},set(e){g().full_player_show.lrc=e}},show_queue:{get(){return g().full_player_show.queue},set(e){g().full_player_show.queue=e}},active_header(){return this.with_header&&this.Music.full_player_show.header}},watch:{"$route.path"(){this.Music.open.full_player=!1}},beforeMount(){this.on_resize(),this.Music.current_song?this.bg_url=this.Music.current_song.cover_url:this.bg_url="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC"},mounted(){window.addEventListener("resize",this.on_resize),document.addEventListener("keyup",this.on_key_event)},beforeUnmount(){window.removeEventListener("resize",this.on_resize),document.removeEventListener("keyup",this.on_key_event)},methods:{on_resize(){window.innerWidth<919?this.narrow_window=!0:this.narrow_window=!1},click_float_info(){this.show_queue=!1,this.show_lrc=!1},click_queue_action(){this.show_queue?this.show_queue=!1:(this.show_lrc=!1,this.show_queue=!0)},click_lrc_action(){this.show_lrc?this.show_lrc=!1:(this.show_queue=!1,this.show_lrc=!0)},queue_control_action(){switch(this.settings.next_song){case"list":this.settings.next_song="random";break;case"random":this.settings.next_song="list_loop";break;case"list_loop":this.settings.next_song="single_loop";break;case"single_loop":this.settings.next_song="list";break}},music_close_action(){this.Music.open.full_player=!1},song_cover_loaded(){this.Music.current_song&&(this.bg_url=this.Music.current_song.cover_url)},on_key_event(e){const t=g();if(!t.open.full_player||t.open.settings||t.open.lrc||t.open.meta)return;switch(e.preventDefault(),e.key){case" ":t.play_pause(),t.current_song_state=="playing"&&y({message:"暂停播放",group:"play_pause"}),t.current_song_state=="paused"&&y({message:"开始播放",group:"play_pause"});break;case"ArrowRight":y({message:"前进 5 秒",group:"time_move"}),t.seek_forward();break;case"ArrowLeft":y({message:"后退 5 秒",group:"time_move"}),t.seek_backward();break;case"ArrowUp":t.settings.volume=Math.min(1,t.settings.volume*1+.1),y({message:"音量："+Math.round(t.settings.volume*100)+"%",key:"volume"});break;case"ArrowDown":t.settings.volume=Math.max(0,t.settings.volume*1-.1),y({message:"音量："+Math.round(t.settings.volume*100)+"%",key:"volume"});break;case"x":t.settings.lrc_row_offset=t.settings.lrc_row_offset*1-.05,this.$nextTick(()=>{y({message:"歌词行偏移："+(t.settings.lrc_row_offset*1).toFixed(2)+"s",key:"lrc_offset"})});break;case"c":t.settings.lrc_row_offset=t.settings.lrc_row_offset*1+.05,this.$nextTick(()=>{y({message:"歌词行偏移："+(t.settings.lrc_row_offset*1).toFixed(2)+"s",key:"lrc_offset"})});break;case"s":t.settings.lrc_word_offset=t.settings.lrc_word_offset*1-.05,this.$nextTick(()=>{y({message:"歌词字偏移："+(t.settings.lrc_word_offset*1).toFixed(2)+"s",group:"lrc_word_offset"})});break;case"d":t.settings.lrc_word_offset=t.settings.lrc_word_offset*1+.05,this.$nextTick(()=>{y({message:"歌词字偏移："+(t.settings.lrc_word_offset*1).toFixed(2)+"s",group:"lrc_word_offset"})});break;case"PageUp":t.play_prev_song(),y({message:"上一首",group:"switch_song"});break;case"PageDown":t.play_next_song(),y({message:"下一首",group:"switch_song"});break}},on_close_start(e){e.preventDefault(),document.addEventListener("mousemove",this.on_close_move),document.addEventListener("mouseup",this.on_close_end),this.close_data.start_position=e.clientY,this.close_data.last_move_position=e.clientY},on_close_move(e){if(e.preventDefault(),e.clientY==this.close_data.last_move_position)return;this.close_data.move_direction=e.clientY-this.close_data.last_move_position,this.close_data.last_move_position=e.clientY;let c=100-(e.clientY-this.close_data.start_position)/window.innerHeight*100;c<0&&(c=0),c>100&&(c=100),this.appear_percent=c},on_close_end(e){e.preventDefault(),this.close_data.move_direction>0?(C.to(this,{duration:.5,appear_percent:0}),setTimeout(()=>{this.Music.open.full_player=!1},500)):C.to(this,{duration:.2,appear_percent:100}),document.removeEventListener("mousemove",this.on_close_move),document.removeEventListener("mouseup",this.on_close_end)},on_close_start_touch(e){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),document.addEventListener("touchmove",this.on_close_move_touch,{passive:!1}),document.addEventListener("touchend",this.on_close_end_touch);const t=e.touches[0];this.close_data.start_position=t.clientY,this.close_data.last_move_position=t.clientY},on_close_move_touch(e){e.cancelable&&e.preventDefault(),window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();const t=e.touches[0];if(t.clientY==this.close_data.last_move_position)return;this.close_data.move_direction=t.clientY-this.close_data.last_move_position,this.close_data.last_move_position=t.clientY;let n=100-(t.clientY-this.close_data.start_position)/window.innerHeight*100;n<0&&(n=0),n>100&&(n=100),this.appear_percent=n},on_close_end_touch(e){this.close_data.move_direction>0?(C.to(this,{duration:.5,appear_percent:0}),setTimeout(()=>{this.Music.open.full_player=!1},500)):C.to(this,{duration:.2,appear_percent:100}),document.removeEventListener("touchmove",this.on_close_move_touch),document.removeEventListener("touchend",this.on_close_end_touch)}}},es=le('<div class="bg_items_box"><div class="bg_part bg_part_1"></div><div class="bg_part bg_part_2"></div><div class="bg_part bg_part_3"></div><div class="bg_part bg_part_4"></div></div><div class="bg_overlay"></div>',2),ts=[es],ss=s("div",{class:"music_close_button_item"},null,-1),_s=[ss],ns={class:"music_main content"},os={class:"song_info_container"},rs={class:"song_cover_wrapper"},is={class:"song_titles_wrapper"},cs={class:"song_control_container"},ls={key:0,class:"lrc_container"},as={key:0,class:"queue_container"},us={class:"queue_control"},hs={key:0,width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg"},ds=s("path",{d:"M8.9,9.7C8.4,9.7,8,10,8,10.5s0.4,0.8,0.9,0.8h11.2v1.3c0,0.4,0.3,0.7,0.7,0.7c0.2,0,0.4-0.1,0.5-0.2l2.6-2.2c0.3-0.3,0.3-0.7,0-1l-2.6-2.2c-0.1-0.1-0.3-0.2-0.5-0.2c-0.4,0-0.7,0.3-0.7,0.7v1.4"},null,-1),gs=s("path",{d:"M8.9,18.4C8.4,18.4,8,18,8,17.6s0.4-0.8,0.9-0.8h11.2v-1.3c0-0.4,0.3-0.7,0.7-0.7c0.2,0,0.4,0.1,0.5,0.2l2.6,2.2c0.3,0.3,0.3,0.7,0,1l-2.6,2.2c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.7-0.3-0.7-0.7v-1.4"},null,-1),ws=[ds,gs],vs={key:1,width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg"},ms=s("path",{d:"M9.545 14.272a.856.856 0 00.863-.855v-.448c0-1.004.706-1.677 1.785-1.677h5.005v1.362c0 .407.258.664.673.664a.745.745 0 00.49-.183l2.581-2.166c.316-.266.316-.69 0-.955l-2.581-2.183a.745.745 0 00-.49-.183c-.415 0-.672.258-.672.665v1.294h-4.881c-2.217 0-3.628 1.254-3.628 3.213v.597c0 .474.382.855.855.855zm4.864 5.952c.407 0 .664-.257.664-.664v-1.303h4.881c2.225 0 3.628-1.254 3.628-3.213v-.597a.854.854 0 10-1.71 0v.448c0 1.004-.714 1.677-1.793 1.677h-5.006v-1.353c0-.407-.257-.664-.664-.664a.767.767 0 00-.498.182l-2.573 2.175c-.324.257-.315.68 0 .946l2.573 2.192a.807.807 0 00.498.174z"},null,-1),ps=[ms],fs={key:2,width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg"},ys=s("path",{d:"M20.767 20.44a.81.81 0 00.49-.183l2.58-2.174c.316-.266.316-.681 0-.955l-2.58-2.183a.81.81 0 00-.49-.183c-.415 0-.673.258-.673.673v1.245h-1.162c-.739 0-1.195-.233-1.718-.847l-1.527-1.801 1.527-1.81c.54-.63.946-.847 1.677-.847h1.203v1.279c0 .407.258.664.673.664a.801.801 0 00.49-.174l2.58-2.175c.316-.266.316-.69 0-.955l-2.58-2.183a.761.761 0 00-.49-.183c-.415 0-.673.258-.673.665v1.386h-1.212c-1.228 0-1.992.34-2.863 1.386l-1.412 1.668-1.469-1.751c-.805-.946-1.569-1.303-2.747-1.303H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.437c.697 0 1.162.225 1.685.847l1.519 1.801-1.52 1.81c-.53.623-.954.847-1.643.847H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.536c1.179 0 1.901-.356 2.706-1.303l1.478-1.751 1.444 1.718c.822.98 1.627 1.336 2.822 1.336h1.212v1.412c0 .415.258.672.673.672z"},null,-1),xs=[ys],ks={key:3,width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg"},bs=s("path",{d:"M22.752 12.313c.473 0 .747-.257.747-.771V8.503c0-.54-.357-.904-.888-.904-.44 0-.698.14-1.038.398l-.838.656c-.2.15-.266.299-.266.473 0 .257.19.465.498.465.133 0 .24-.042.349-.125l.614-.514h.058v2.59c0 .514.274.771.764.771zm-13.207 1.96a.84.84 0 00.863-.856v-.448c0-1.004.706-1.677 1.785-1.677h3.403v1.362c0 .407.258.664.673.664a.745.745 0 00.49-.183l2.581-2.166c.316-.266.316-.69 0-.955L16.76 7.831a.745.745 0 00-.49-.183c-.415 0-.673.258-.673.665v1.294h-3.278c-2.217 0-3.628 1.254-3.628 3.213v.597c0 .49.374.855.855.855zm4.864 5.951c.407 0 .664-.257.664-.664v-1.303h4.881c2.225 0 3.628-1.254 3.628-3.213v-.597a.838.838 0 00-.855-.855.833.833 0 00-.855.855v.448c0 1.004-.714 1.677-1.793 1.677h-5.006v-1.353c0-.407-.257-.664-.664-.664a.767.767 0 00-.498.182l-2.573 2.175c-.324.257-.315.68 0 .946l2.573 2.192a.807.807 0 00.498.174z"},null,-1),Ms=[bs],qs={key:0},Ss={key:1},Ls={key:2},As={key:3},Cs={key:4},Ts={class:"queue_count"},zs={class:"edit_queue"},Bs={key:0},Hs={key:1},Es={key:0,class:"song_float_info_container"},$s={key:0,viewBox:"-9 -9 36 36",width:"36",height:"36"},Ps=s("mask",{id:"mask_lrc"},[s("rect",{x:"-9",y:"-9",width:"36",height:"36",fill:"white"}),s("path",{d:"m9.67 13.982-2.43 2.474c-.472.471-.79.675-1.145.675-.479 0-.623-.314-.623-1.012v-2.137H5.26c-1.406 0-1.915-.146-2.429-.42a2.877 2.877 0 0 1-1.192-1.192c-.274-.514-.421-1.024-.421-2.429V6.464c0-1.405.147-1.915.421-2.428a2.872 2.872 0 0 1 1.192-1.192c.514-.275 1.023-.421 2.429-.421h7.68c1.406 0 1.915.146 2.429.421a2.86 2.86 0 0 1 1.192 1.192c.274.513.421 1.023.421 2.428v3.477c0 1.405-.147 1.915-.421 2.429a2.866 2.866 0 0 1-1.192 1.192c-.514.274-1.023.42-2.429.42H9.67Zm-.974-.957c.257-.261.608-.408.974-.408h3.27c1.076 0 1.426-.068 1.785-.26.276-.147.484-.356.631-.632.192-.358.26-.709.26-1.784V6.464c0-1.075-.068-1.426-.26-1.784a1.49 1.49 0 0 0-.631-.631c-.359-.192-.709-.26-1.785-.26H5.26c-1.075 0-1.425.068-1.785.26a1.5 1.5 0 0 0-.631.631c-.192.358-.26.709-.26 1.784v3.477c0 1.075.068 1.426.26 1.784.148.276.356.485.631.632.36.192.71.26 1.785.26h.212c.754 0 1.365.611 1.365 1.365v.934l1.859-1.891ZM5.422 8.01c0-.821.67-1.383 1.554-1.383.976 0 1.599.726 1.599 1.634 0 1.73-1.46 2.084-2.242 2.084-.222 0-.381-.148-.381-.329 0-.173.084-.294.372-.364.502-.12 1.005.028 1.274-.491h-.056c-.185.208-.483.242-.771.242-.837 0-1.349-.614-1.349-1.393Zm4.204 0c0-.821.669-1.383 1.553-1.383.976 0 1.6.726 1.6 1.634 0 1.73-1.46 2.084-2.242 2.084-.223 0-.381-.148-.381-.329 0-.173.084-.294.372-.364.502-.12 1.004.028 1.274-.491h-.056c-.186.208-.483.242-.772.242-.837 0-1.348-.614-1.348-1.393Z",fill:"black"})],-1),Vs=s("rect",{x:"-9",y:"-9",width:"36",height:"36",mask:"url(#mask_lrc)"},null,-1),Fs=[Ps,Vs],Ys={key:1,viewBox:"-9 -9 36 36",width:"36",height:"36"},Rs=s("path",{d:"m9.67 13.982-2.43 2.474c-.472.471-.79.675-1.145.675-.479 0-.623-.314-.623-1.012v-2.137H5.26c-1.406 0-1.915-.146-2.429-.42a2.877 2.877 0 0 1-1.192-1.192c-.274-.514-.421-1.024-.421-2.429V6.464c0-1.405.147-1.915.421-2.428a2.872 2.872 0 0 1 1.192-1.192c.514-.275 1.023-.421 2.429-.421h7.68c1.406 0 1.915.146 2.429.421a2.86 2.86 0 0 1 1.192 1.192c.274.513.421 1.023.421 2.428v3.477c0 1.405-.147 1.915-.421 2.429a2.866 2.866 0 0 1-1.192 1.192c-.514.274-1.023.42-2.429.42H9.67Zm-.974-.957c.257-.261.608-.408.974-.408h3.27c1.076 0 1.426-.068 1.785-.26.276-.147.484-.356.631-.632.192-.358.26-.709.26-1.784V6.464c0-1.075-.068-1.426-.26-1.784a1.49 1.49 0 0 0-.631-.631c-.359-.192-.709-.26-1.785-.26H5.26c-1.075 0-1.425.068-1.785.26a1.5 1.5 0 0 0-.631.631c-.192.358-.26.709-.26 1.784v3.477c0 1.075.068 1.426.26 1.784.148.276.356.485.631.632.36.192.71.26 1.785.26h.212c.754 0 1.365.611 1.365 1.365v.934l1.859-1.891ZM5.422 8.01c0-.821.67-1.383 1.554-1.383.976 0 1.599.726 1.599 1.634 0 1.73-1.46 2.084-2.242 2.084-.222 0-.381-.148-.381-.329 0-.173.084-.294.372-.364.502-.12 1.005.028 1.274-.491h-.056c-.185.208-.483.242-.771.242-.837 0-1.349-.614-1.349-1.393Zm4.204 0c0-.821.669-1.383 1.553-1.383.976 0 1.6.726 1.6 1.634 0 1.73-1.46 2.084-2.242 2.084-.223 0-.381-.148-.381-.329 0-.173.084-.294.372-.364.502-.12 1.004.028 1.274-.491h-.056c-.186.208-.483.242-.772.242-.837 0-1.348-.614-1.348-1.393Z"},null,-1),Ds=[Rs],Zs={key:0,viewBox:"-9 -9 36 36",width:"36",height:"36"},Ns=s("mask",{id:"mask_queue"},[s("rect",{x:"-9",y:"-9",width:"36",height:"36",fill:"white"}),s("path",{d:"M2.634 5.537a.906.906 0 1 0 0-1.813.906.906 0 1 0 0 1.813zm3.192-.325h9.865a.576.576 0 0 0 .585-.578.578.578 0 0 0-.585-.585H5.826a.574.574 0 0 0-.585.585c0 .325.253.578.585.578zM2.634 9.906c.506 0 .91-.404.91-.91a.906.906 0 0 0-.91-.91.906.906 0 0 0-.91.91c0 .506.405.91.91.91zm3.192-.325h9.865a.582.582 0 1 0 0-1.162H5.826a.572.572 0 0 0-.585.577c0 .325.253.585.585.585zm-3.192 4.694a.91.91 0 1 0-.001-1.82.91.91 0 0 0 0 1.82zm3.192-.332h9.865a.576.576 0 0 0 .585-.577.578.578 0 0 0-.585-.585H5.826a.574.574 0 0 0-.585.585c0 .324.253.577.585.577z",fill:"black"})],-1),Us=s("rect",{x:"-9",y:"-9",width:"36",height:"36",mask:"url(#mask_queue)"},null,-1),Qs=[Ns,Us],Gs={key:1,viewBox:"-9 -9 36 36",width:"36",height:"36"},Ws=s("path",{d:"M2.634 5.537a.906.906 0 1 0 0-1.813.906.906 0 1 0 0 1.813zm3.192-.325h9.865a.576.576 0 0 0 .585-.578.578.578 0 0 0-.585-.585H5.826a.574.574 0 0 0-.585.585c0 .325.253.578.585.578zM2.634 9.906c.506 0 .91-.404.91-.91a.906.906 0 0 0-.91-.91.906.906 0 0 0-.91.91c0 .506.405.91.91.91zm3.192-.325h9.865a.582.582 0 1 0 0-1.162H5.826a.572.572 0 0 0-.585.577c0 .325.253.585.585.585zm-3.192 4.694a.91.91 0 1 0-.001-1.82.91.91 0 0 0 0 1.82zm3.192-.332h9.865a.576.576 0 0 0 .585-.577.578.578 0 0 0-.585-.585H5.826a.574.574 0 0 0-.585.585c0 .324.253.577.585.577z"},null,-1),Is=[Ws];function js(e,t,o,c,n,_){const f=x("SongCover"),a=x("SongTitles"),l=x("SongBar"),w=x("SongButtons"),P=x("SongLrc"),z=x("SongQueue"),L=x("Popper");return r(),i("div",{class:k(["MusicPlayerFull",{with_header:_.active_header,with_close:o.closeable,bg_ani:_.Music.settings.bg_ani}])},[s("div",{class:"music_bg",style:b({"--bg-img":`url(${n.bg_url})`})},ts,4),o.closeable?(r(),i("div",{key:0,class:"music_close_box",onMousedown:t[1]||(t[1]=(...m)=>_.on_close_start&&_.on_close_start(...m)),onTouchstartPassive:t[2]||(t[2]=(...m)=>_.on_close_start_touch&&_.on_close_start_touch(...m))},[s("div",{class:"music_close_button",onClick:t[0]||(t[0]=(...m)=>_.music_close_action&&_.music_close_action(...m))},_s)],32)):d("",!0),s("div",ns,[s("div",{class:k(["music_left",{narrow_window:n.narrow_window,active_center_song_card:!n.narrow_window&&!_.show_lrc&&!_.show_queue}])},[s("div",os,[s("div",rs,[u(M,{name:"music_part_transition"},{default:h(()=>[ie(u(f,{song_cover_url:_.Music.current_song&&_.Music.current_song.cover_url,song_key:_.Music.current_song&&_.Music.current_song.song_key,onSong_cover_loaded:_.song_cover_loaded},null,8,["song_cover_url","song_key","onSong_cover_loaded"]),[[ce,!(n.narrow_window&&(_.show_lrc||_.show_queue))]])]),_:1})]),s("div",is,[u(M,{name:"music_part_transition"},{default:h(()=>[n.narrow_window&&(_.show_lrc||_.show_queue)?d("",!0):(r(),T(a,{key:0,song:_.Music.current_song,song_key:_.Music.current_song&&_.Music.current_song.song_key},null,8,["song","song_key"]))]),_:1})])]),s("div",cs,[u(l),u(w)])],2),s("div",{class:k(["music_right",{narrow_window:n.narrow_window,inactive:!_.show_lrc&&!_.show_queue}])},[u(M,{name:"music_part_transition"},{default:h(()=>[_.show_lrc?(r(),i("div",ls,[u(P,{show_queue:_.show_queue,show_lrc:_.show_lrc,ref:"SongLrc"},null,8,["show_queue","show_lrc"])])):d("",!0)]),_:1}),u(M,{name:"music_part_transition"},{default:h(()=>[_.show_queue?(r(),i("div",as,[s("div",us,[s("div",{class:"queue_control_button",onClick:t[3]||(t[3]=m=>_.queue_control_action())},[_.settings.next_song=="list"?(r(),i("svg",hs,ws)):_.settings.next_song=="list_loop"?(r(),i("svg",vs,ps)):_.settings.next_song=="random"?(r(),i("svg",fs,xs)):_.settings.next_song=="single_loop"?(r(),i("svg",ks,Ms)):d("",!0)]),s("h3",null,[_.settings.next_song=="list"?(r(),i("span",qs,"顺序播放")):_.settings.next_song=="list_loop"?(r(),i("span",Ss,"列表循环")):_.settings.next_song=="random"?(r(),i("span",Ls,"随机播放")):_.settings.next_song=="single_loop"?(r(),i("span",As,"单曲循环")):(r(),i("span",Cs,v(e.$text("player.queue")),1)),s("span",Ts,v(_.queue?_.queue.length:""),1)]),s("div",zs,[n.editing_queue?d("",!0):(r(),i("p",Bs,[s("a",{onClick:t[4]||(t[4]=m=>n.editing_queue=!0)},"编辑")])),n.editing_queue?(r(),i("p",Hs,[s("a",{onClick:t[5]||(t[5]=m=>n.editing_queue=!1)},"完成编辑")])):d("",!0)])]),s("div",{class:k(["queue_items",{editing_queue:n.editing_queue}])},[u(z,{editing_queue:n.editing_queue},null,8,["editing_queue"])],2)])):d("",!0)]),_:1})],2),s("div",{class:k(["music_float",{narrow_window:n.narrow_window}])},[u(M,{name:"music_part_transition"},{default:h(()=>[n.narrow_window&&(_.show_lrc||_.show_queue)?(r(),i("div",Es,[s("div",{class:"song_cover_wrapper",onClick:t[6]||(t[6]=(...m)=>_.click_float_info&&_.click_float_info(...m))},[u(f,{song_cover_url:_.Music.current_song&&_.Music.current_song.cover_url,song_key:_.Music.current_song&&_.Music.current_song.song_key},null,8,["song_cover_url","song_key"])]),u(a,{song:_.Music.current_song,song_key:_.Music.current_song&&_.Music.current_song.song_key,size:"small"},null,8,["song","song_key"])])):d("",!0)]),_:1}),s("div",{class:k(["music_buttons",{no_song_info:!n.narrow_window}])},[u(L,{placement:n.narrow_window?"bottom":"top"},{dropdown:h(()=>[s("span",null,v(_.show_lrc?e.$text("settings.hide"):e.$text("settings.show"))+" "+v(e.$text("player.lrc")),1)]),default:h(()=>[s("button",{onClick:t[7]||(t[7]=(...m)=>_.click_lrc_action&&_.click_lrc_action(...m))},[_.show_lrc?(r(),i("svg",$s,Fs)):(r(),i("svg",Ys,Ds))])]),_:1},8,["placement"]),u(L,{placement:n.narrow_window?"bottom":"top"},{dropdown:h(()=>[s("span",null,v(_.show_queue?e.$text("settings.hide"):e.$text("settings.show"))+" "+v(e.$text("player.queue")),1)]),default:h(()=>[s("button",{onClick:t[8]||(t[8]=(...m)=>_.click_queue_action&&_.click_queue_action(...m))},[_.show_queue?(r(),i("svg",Zs,Qs)):(r(),i("svg",Gs,Is))])]),_:1},8,["placement"])],2)],2)])],2)}const e_=E(Xt,[["render",js]]);export{e_ as M};
