import{m as B,a2 as D,a0 as A,Y as x,ad as I,ae as R,a5 as T,V,o as r,d,e as u,g as i,A as $,w as y,F as U,i as F,t as g,af as L,p as c,q as f,f as _,ag as S,O as z,Q as E,a9 as G,ah as O,D as q,l as N,P as Q,h as Y}from"./index-b89d1eee.js";import{M as j}from"./More-5ad9ac65.js";const H={key:0,class:"Pagination"},J={class:"pagination_bottons"},K=["disabled"],W=["onClick"],X=["disabled"],Z={class:"pagination_dialog confirm_dialog"},ee={class:"title_container"},ae={class:"confirm_dialog_title"},te={class:"dialog_row change_num_row"},ne={class:"text_button_wrapper"},se={class:"dialog_row"},le={class:"slider"},ue={class:"button_container"},ge=B({__name:"Pagination",props:{page_name:{type:String,default:"page"},max_page:{type:Number,default:1},min_page:{type:Number,default:1},default_page:{type:Number,default:1}},setup(l){const e=l,w=D(),m=A(),o=x(m.query[e.page_name]?parseInt(m.query[e.page_name]):e.default_page),k=x(!0);I((s,t,a)=>{k.value=!1,a()}),R(()=>{k.value=!0,o.value=m.query[e.page_name]?parseInt(m.query[e.page_name]):e.default_page}),T(()=>m.query[e.page_name],s=>{k.value&&(o.value=s?parseInt(s):e.default_page)});const P=V(()=>{const s=[],t=e.max_page-e.min_page+1;if(t<=0)return s;if(t<=9){for(let a=e.min_page;a<=e.max_page;a++)s.push(a);return s}else{s.push(e.min_page),o.value<=e.min_page+4?s.push(e.min_page+1):s.push("l_ellipsis");let a=o.value;a<e.min_page+4&&(a=e.min_page+4),a>e.max_page-4&&(a=e.max_page-4);for(let b=0;b<5;b++)s.push(a-2+b);return o.value>=e.max_page-4?s.push(e.max_page-1):s.push("r_ellipsis"),s.push(e.max_page),s}});function p(s){s>=e.min_page&&s<=e.max_page&&w.push({query:{...m.query,[e.page_name]:s}})}const n=x(1),v=x(!1),C=V({get(){return(n.value-e.min_page)/(e.max_page-e.min_page)},set(s){const t=Math.round(s*(e.max_page-e.min_page)+e.min_page);n.value=t}});function h(){v.value=!0,n.value=o.value}function M(){v.value=!1,n.value<e.min_page?p(e.min_page):n.value>e.max_page?p(e.max_page):p(n.value)}return(s,t)=>l.max_page>l.min_page?(r(),d("div",H,[u("div",J,[u("button",{class:"next_page_button",onClick:t[0]||(t[0]=a=>p(o.value-1)),disabled:o.value<=l.min_page},[i($,{class:"left"})],8,K),i(L,{name:"page_button_trans",tag:"span"},{default:y(()=>[(r(!0),d(U,null,F(P.value,a=>(r(),d("div",{key:a,class:"page_button_item"},[o.value==a?(r(),d("button",{key:0,class:"page_button page_button_current",onClick:h},g(a),1)):typeof a=="number"?(r(),d("button",{key:1,class:"page_button",onClick:b=>p(a)},g(a),9,W)):(r(),d("button",{key:2,class:"page_button page_button_more",onClick:h},[i(j)]))]))),128))]),_:1}),u("button",{class:"next_page_button",onClick:t[1]||(t[1]=a=>p(o.value+1)),disabled:o.value>=l.max_page},[i($,{class:"right"})],8,X)]),i(Q,{modelValue:v.value,"onUpdate:modelValue":t[10]||(t[10]=a=>v.value=a)},{default:y(()=>[u("div",Z,[u("div",ee,[u("h3",ae,g(c(f)("nav.goto_page")),1)]),u("div",te,[u("button",{class:_(["kbutton change_num_button maxmin_button",{disabled:n.value<=l.min_page}]),onClick:t[2]||(t[2]=a=>n.value=l.min_page)},g(c(f)("settings.min")),3),u("span",{class:_(["icon change_num_button",{disabled:n.value<=l.min_page}]),onClick:t[3]||(t[3]=a=>n.value=n.value-1)},[i(S)],2),u("div",ne,[z(u("input",{class:_(["kinput",{error:n.value>l.max_page||n.value<l.min_page}]),ref:"input","onUpdate:modelValue":t[4]||(t[4]=a=>n.value=a),type:"number"},null,2),[[E,n.value,void 0,{number:!0}]])]),u("span",{class:_(["icon change_num_button",{disabled:n.value>=l.max_page}]),onClick:t[5]||(t[5]=a=>n.value=n.value+1)},[i(G)],2),u("button",{class:_(["kbutton change_num_button maxmin_button",{disabled:n.value>=l.max_page}]),onClick:t[6]||(t[6]=a=>n.value=l.max_page)},g(c(f)("settings.max")),3)]),u("div",se,[u("span",{class:_(["min_num",{exact:n.value==l.min_page,error:n.value<l.min_page}])},g(l.min_page),3),u("div",le,[i(O,{modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=a=>C.value=a)},null,8,["modelValue"])]),u("span",{class:_(["max_num",{exact:n.value==l.max_page,error:n.value>l.max_page}])},g(l.max_page),3)]),u("div",ue,[i(q,{class:"plain",icon:"cancel",onClick:t[8]||(t[8]=a=>v.value=!1)},{default:y(()=>[N(g(c(f)("dialog.cancel")),1)]),_:1}),i(q,{icon:"submit",onClick:t[9]||(t[9]=a=>M())},{default:y(()=>[N(g(c(f)("nav.go")),1)]),_:1})])])]),_:1},8,["modelValue"])])):Y("",!0)}});export{ge as _};
