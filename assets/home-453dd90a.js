import{_ as B,b as I,r as b,o as s,k as w,w as M,e as a,n as y,t as _,d as c,h as v,g as u,f as S,a5 as q,G as n,ah as z,ai as L,a9 as N,$ as j,a4 as V,F,i as T,ay as A,az as D,ab as E,c as G}from"./index-1cda587c.js";import{_ as P}from"./PageTitle-e2d4c141.js";import{d as U}from"./display_json_text-65373a13.js";import{R as H}from"./Rate-511047b6.js";import{_ as J}from"./Pagination.vue_vue_type_style_index_0_lang-2c238ca0.js";import{C as K}from"./CommunityPost-b233ba2c.js";import"./ArrowShape-191b3b9e.js";/* empty css                                                   *//* empty css                                                  *//* empty css                                             */import"./More-bcff1299.js";import"./Comment-3aceaf9f.js";import"./markdown_to_html_lite-855e1114.js";import"./index-97cf174a.js";import"./CharacterCard-c3edb58a.js";import"./UserBusiness-bc3e61f6.js";import"./Warning-4e774093.js";import"./Comment-ddab8363.js";import"./GuestInfo-e4b1eef6.js";const O={components:{Rate:H},props:["movie","index","no_appear_ani"],data(){return{display_json_text:U}},computed:{second_language(){return I().settings.second_language}},mounted(){},beforeUnmount(){},methods:{}},Q={class:"movie_item_bg"},W={class:"movie_item_img"},X={class:"movie_item_text_wrapper"},Y={class:"movie_item_text"},Z={class:"title"},$={key:0},ee={key:1},te={class:"tag"},ae={key:0},ie={key:1},oe={key:2};function se(h,d,e,p,i,o){const r=b("Rate"),m=b("router-link");return s(),w(m,{class:S(["movie_item section hover",{appear_section:!e.no_appear_ani}]),to:"/archive/movies/"+e.movie.movie_id.toLowerCase(),style:y({"animation-delay":Math.min(e.index,12)*.04+"s"})},{default:M(()=>[a("div",Q,[a("div",{class:"movie_item_bg_item",style:y({"background-image":"url("+e.movie.cover+")"})},null,4)]),a("div",W,[a("div",{class:"img",style:y({"background-image":"url("+e.movie.cover+")"})},null,4)]),a("div",X,[a("div",Y,[a("div",Z,[a("h2",null,_(e.movie.title),1),e.movie.title_t&&i.display_json_text(e.movie.title_t)?(s(),c("h3",$,_(i.display_json_text(e.movie.title_t)),1)):v("",!0),e.movie.title_t&&i.display_json_text(e.movie.title_t,o.second_language)&&i.display_json_text(e.movie.title_t,o.second_language)!=i.display_json_text(e.movie.title_t)?(s(),c("h3",ee,_(i.display_json_text(e.movie.title_t,o.second_language)),1)):v("",!0)]),a("div",te,[u(r,{rate:e.movie.rate},null,8,["rate"]),e.movie.publish_date&&e.movie.publish_date!="0000-00-00"?(s(),c("div",ae,_(e.movie.publish_date),1)):v("",!0),e.movie.region?(s(),c("div",ie,_(h.$text("regions."+e.movie.region)),1)):v("",!0),e.movie.type?(s(),c("div",oe,_(h.$text("movie_type."+e.movie.type)),1)):v("",!0)])])])]),_:1},8,["to","class","style"])}const ne=B(O,[["render",se]]);const _e={id:"movies_home",class:"content"},le={class:"archive_count"},ce={class:"archive_pagination"},re={class:"section archive_pagination_section blur_part"},Se={__name:"home",setup(h){const d=q(),e=n([]),p=n(0),i=n(24),o=n(null),r=n(!1),m=n(!0),f=n(0);z((t,l,g)=>{f.value=A(),m.value=!1,g()}),L(()=>{m.value=!0;const t=d.query.page?parseInt(d.query.page):1;t===o.value?(D(f.value),r.value=!0):(o.value=t,e.value=[],k())}),N(()=>d.query.page,t=>{if(!m.value)return;const l=t?parseInt(t):1;l!==o.value&&(o.value=l,k(!0))}),C();async function C(){const t=await j("/archive/get_movies_count.php");p.value=parseInt(t.data)}const x=n(null);async function k(t){const l=await j("/archive/get_movies_all.php",{page:o.value});r.value=!1,e.value=l.data.movies||[],i.value=l.data.capacity||24,t&&E(()=>{G(x.value)})}return(t,l)=>(s(),c("div",_e,[u(P,{title:t.$text("nav.archive.movies"),parent:{title:t.$text("nav.archive"),link:"/archive"}},null,8,["title","parent"]),u(V,{class:"achive_items_placeholder",loading:e.value.length==0},null,8,["loading"]),a("div",{class:"movie_item_container",ref_key:"movie_item_container",ref:x},[(s(!0),c(F,null,T(e.value,(g,R)=>(s(),w(ne,{movie:g,key:g.movie_no,index:R,no_appear_ani:r.value},null,8,["movie","index","no_appear_ani"]))),128))],512),a("p",le,_(p.value)+" "+_(t.$text("nav.archive.movies")),1),a("div",ce,[a("div",re,[u(J,{max_page:Math.ceil(p.value/i.value)},null,8,["max_page"])])]),u(K,{post_id:"archive/movies"})]))}};export{Se as default};
