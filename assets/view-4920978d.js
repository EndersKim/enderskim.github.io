import{_ as V}from"./PageTitle-e2d4c141.js";import{v as C,a5 as A,G as u,a9 as N,r as U,o as l,d as n,g as h,e as t,w as m,F as y,i as x,h as p,t as d,l as k,k as E,f as L,aT as R}from"./index-1cda587c.js";import"./ArrowShape-191b3b9e.js";/* empty css                                                   *//* empty css                                                  */const S={class:"content"},W={class:"files_path"},z=t("span",{class:"path_div"},null,-1),G={key:0,class:"files_children"},M=t("div",{class:"img_box"},[t("svg",{t:"1722161427438",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3372",width:"200",height:"200"},[t("path",{d:"M832 874.666667h-640A105.386667 105.386667 0 0 1 85.333333 770.986667V253.013333A105.386667 105.386667 0 0 1 192 149.333333h196.266667a42.666667 42.666667 0 0 1 32.853333 15.786667l110.933333 135.68h298.666667A105.386667 105.386667 0 0 1 938.666667 404.48v366.506667a105.386667 105.386667 0 0 1-106.666667 103.68z","p-id":"3373"})])],-1),T={class:"text_box"},$={class:"main_text"},j=t("p",{class:"sub_text"},"Folder",-1),D=["onClick"],K={class:"img_box"},q=["src"],H={class:"text_box"},I={class:"main_text"},J={class:"sub_text"},O={key:1,class:"acitve_file_box"},P=["src"],Q=t("div",{style:{height:"20px"}},null,-1),ae={__name:"view",setup(X){const w=C(),g=A(),b=u(null),r=u(null),v=u([]),_=u([]);function B(s){return s<1024?s+"B":s<1024*1024?(s/1024).toFixed(2)+"KB":s<1024*1024*1024?(s/1024/1024).toFixed(2)+"MB":(s/1024/1024/1024).toFixed(2)+"GB"}async function F(){var e,f;const s=r.value,a=await R.get(window.location.origin+"/assets_server/info"+s,{headers:{token:w.tokenid}});if(!a){console.error("网络错误");return}if(a.status!==200){console.error("网络错误");return}const o=a.data;if(o.status!=="success"){console.log(o);return}b.value=o.data,console.log(o.data),_.value=[],(f=(e=o.data)==null?void 0:e.children)==null||f.forEach(i=>{i.type==="directory"?_.value.push({type:"directory",name:i.name,link:"/laboratory/view_upload/"+(r.value?r.value+"/":"")+i.name}):i.type==="file"&&i.name.endsWith(".webp")&&_.value.push({type:"file",name:i.name,size:i.size,display_size:B(i.size),src:o.data.full_path+"/"+i.name})})}N(()=>g.params,s=>{if(r.value="",v.value=[],s.id){let a=s.id.join("/");a.startsWith("/")&&(a=a.slice(1)),a.endsWith("/")&&(a=a.slice(0,-1)),r.value=a;let o="";a.split("/").forEach(e=>{o+="/"+e,v.value.push({name:e,path:o})})}F()},{immediate:!0});const c=u(null);return(s,a)=>{const o=U("RouterLink");return l(),n("div",S,[h(V,{title:"View Upload",children:[{title:"Upload",link:"/laboratory/upload"},{title:"View Upload",link:"/laboratory/view_upload"}]}),t("div",W,[h(o,{to:"/laboratory/view_upload",class:"path_link"},{default:m(()=>[k("Uploaded Files")]),_:1}),(l(!0),n(y,null,x(v.value,e=>(l(),n(y,{key:"/laboratory/view_upload"+e.path},[z,h(o,{to:"/laboratory/view_upload"+e.path,class:"path_link"},{default:m(()=>[k(d(e.name),1)]),_:2},1032,["to"])],64))),128))]),_.value.length>0?(l(),n("div",G,[(l(!0),n(y,null,x(_.value,e=>(l(),n("div",{class:"file_child",key:e.name},[e.type==="directory"?(l(),E(o,{key:0,class:"file_item directory",to:e.link},{default:m(()=>[M,t("div",T,[t("p",$,d(e.name),1),j])]),_:2},1032,["to"])):p("",!0),e.type==="file"?(l(),n("div",{key:1,class:L(["file_item file",{active:c.value===e}]),onClick:f=>c.value=e},[t("div",K,[t("img",{src:e.src},null,8,q)]),t("div",H,[t("p",I,d(e.name),1),t("p",J,d(e.display_size),1)])],10,D)):p("",!0)]))),128))])):p("",!0),c.value?(l(),n("div",O,[t("p",null,d(c.value.src),1),t("img",{src:c.value.src},null,8,P)])):p("",!0),Q])}}};export{ae as default};
