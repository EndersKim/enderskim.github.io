import{_ as B,b as I,r as x,o as s,k as w,w as q,e as t,t as n,d as o,h as v,g as m,f as S,n as V,X as L,V as i,ac as N,ad as z,a2 as F,$ as k,W as G,F as M,i as T,aq as $,ar as j,a4 as A,c as D}from"./index-1fc629ac.js";import{d as b}from"./display_json_text-01b7f379.js";import{R as E}from"./Rate-bb09ea0f.js";import{_ as P}from"./PageTitle-092115f9.js";import{_ as U}from"./Pagination.vue_vue_type_style_index_0_lang-4ef08e73.js";import{C as W}from"./CommunityPost-b75616ac.js";/* empty css                                             */import"./ArrowShape-8a941afa.js";/* empty css                                                   *//* empty css                                                  */import"./More-84fec72f.js";import"./Comment-40c00899.js";import"./markdown_to_html_lite-855e1114.js";import"./index-97cf174a.js";import"./CharacterCard-20be52a3.js";import"./UserBusiness-680c825d.js";import"./Warning-f96db5f0.js";import"./Comment-f61365b3.js";const X={components:{Rate:E},props:["game","index","no_appear_ani"],data(){return{open_tag:!1}},computed:{game_title_t(){return this.game.title_t?b(this.game.title_t):null},game_title_t_second(){return this.game.title_t?b(this.game.title_t,I().settings.second_language):null}},mounted(){},beforeUnmount(){},methods:{}},H={class:"game_item_bg"},J=["src"],K={class:"game_item_img"},O=["src"],Q=t("div",{class:"img_back"},null,-1),Y={class:"game_item_text_wrapper"},Z={class:"game_item_text"},ee={class:"title"},te={key:0},ae={key:1},se={class:"tag_box"},_e={class:"tag"},ne={key:0},ie={key:1},oe={key:2};function re(h,g,e,u,r,_){const c=x("Rate"),d=x("router-link");return s(),w(d,{class:S(["game_item",{appear_section:!e.no_appear_ani}]),to:"/archive/games/"+e.game.game_id.toLowerCase(),style:V({"animation-delay":Math.min(e.index,12)*.04+"s"})},{default:q(()=>[t("div",H,[t("img",{class:"game_item_bg_item",src:e.game.cover},null,8,J)]),t("div",K,[t("img",{src:e.game.cover},null,8,O),Q]),t("div",Y,[t("div",Z,[t("div",ee,[t("h2",null,n(e.game.title),1),_.game_title_t?(s(),o("h3",te,n(_.game_title_t),1)):_.game_title_t_second?(s(),o("h3",ae,n(_.game_title_t_second),1)):v("",!0)]),t("div",se,[t("div",_e,[m(c,{rate:e.game.rate},null,8,["rate"]),e.game.publish_date?(s(),o("div",ne,n(e.game.publish_date),1)):v("",!0),e.game.region?(s(),o("div",ie,n(h.$text("regions."+e.game.region)),1)):v("",!0),e.game.gameplay?(s(),o("div",oe,n(h.$text("gameplay_short."+e.game.gameplay)),1)):v("",!0)])])])])]),_:1},8,["to","class","style"])}const le=B(X,[["render",re]]);const ce={id:"games_home",class:"content"},me={class:"archive_count"},ge={class:"archive_pagination"},ue={class:"section archive_pagination_section blur_part"},Ne={__name:"home",setup(h){const g=L(),e=i([]),u=i(0),r=i(null),_=i(!1),c=i(!0),d=i(0);N((a,l,p)=>{d.value=$(),c.value=!1,p()}),z(()=>{c.value=!0;const a=g.query.page?parseInt(g.query.page):1;a===r.value?(j(d.value),_.value=!0):(r.value=a,e.value=[],y())}),F(()=>g.query.page,a=>{if(!c.value)return;const l=a?parseInt(a):1;l!==r.value&&(r.value=l,y(!0))}),C();async function C(){const a=await k("/archive/get_games_count.php");u.value=parseInt(a.data)}const f=i(null);async function y(a){const l=await k("/archive/get_all_games.php",{page:r.value});_.value=!1,e.value=l.data||[],a&&A(()=>{D(f.value)})}return(a,l)=>(s(),o("div",ce,[m(P,{title:a.$text("nav.archive.games"),parent:{title:a.$text("nav.archive"),link:"/archive"}},null,8,["title","parent"]),m(G,{class:"achive_items_placeholder",loading:e.value.length==0},null,8,["loading"]),t("div",{class:"games_item_container",ref_key:"games_item_container",ref:f},[(s(!0),o(M,null,T(e.value,(p,R)=>(s(),w(le,{game:p,key:p.game_no,no_appear_ani:_.value,index:R},null,8,["game","no_appear_ani","index"]))),128))],512),t("p",me,n(u.value)+" "+n(a.$text("nav.archive.games")),1),t("div",ge,[t("div",ue,[m(U,{max_page:Math.ceil(u.value/24)},null,8,["max_page"])])]),m(W,{post_id:"archive/games"})]))}};export{Ne as default};
