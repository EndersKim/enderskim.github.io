import{d as b}from"./display_json_text-01b7f379.js";import{an as A,N as F,V as r,$ as L,r as M,o as e,d as t,e as a,n as x,g as w,w as q,f as z,t as l,p as d,h as o,ao as R,k as C,ap as $,a6 as j,F as D}from"./index-1fc629ac.js";import{p as E}from"./parse_song_data-87314fe1.js";import{P as G}from"./Pause-ae4119dd.js";const H={key:0,class:"a_song"},I={class:"bg_wrapper"},J=a("div",{class:"img_back"},null,-1),K={class:"text_wrapper"},O={class:"title_box"},Q={class:"main_title"},T={key:0,class:"sub_title"},U={class:"song_tags"},W={key:0,class:"song_tag"},X={key:1,class:"song_tag_dot"},Y={key:2,class:"song_tag"},Z={class:"play_buttons"},ss={key:1,class:"a_song_error"},as={key:2,class:"a_song_error"},_s={__name:"ASong",props:["song_id"],setup(g){const{song_id:S}=g,u=A(),v=F(()=>{var n,c;return _&&((n=u.current_song)==null?void 0:n.song_key)==((c=_.value)==null?void 0:c.song_key)&&u.current_song_state=="playing"}),s=r(null),i=r("loading"),_=r(null);B();async function B(){const n=await L("/archive/music/get_song_detail.php",{song_id:S});if(n.status!="success"){i.value="error";return}i.value="success",s.value=n.data.song,_.value=E(s.value)}function N(){u.push_song(_.value)}function P(){u.push_and_play_song(_.value)}return(n,c)=>{var p,m,y,k,h;const V=M("RouterLink");return e(),t(D,null,[s.value?(e(),t("div",H,[a("div",I,[a("div",{class:"bg",style:x({"background-image":"url("+((p=s.value)==null?void 0:p.cover_url)+")"})},null,4)]),w(V,{class:"img_wrapper",to:"/archive/music/songs/"+((m=s.value)==null?void 0:m.song_id)},{default:q(()=>{var f;return[a("div",{class:z(["img_item",{playing:v.value}]),style:x({"background-image":"url("+((f=s.value)==null?void 0:f.cover_url)+")"})},null,6),J]}),_:1},8,["to"]),a("div",K,[a("div",O,[a("span",Q,l((y=s.value)==null?void 0:y.title),1),d(b)((k=s.value)==null?void 0:k.title_t)?(e(),t("span",T,"("+l(d(b)((h=s.value)==null?void 0:h.title_t))+")",1)):o("",!0)]),a("div",U,[s.value._artists_name?(e(),t("span",W,l(s.value._artists_name),1)):o("",!0),s.value._artists_name&&s.value.audio_duration?(e(),t("span",X," · ")):o("",!0),s.value.audio_duration?(e(),t("span",Y,l(d(R)(s.value.audio_duration)),1)):o("",!0)])]),a("div",Z,[a("div",{class:"song_button",onClick:P},[v.value?(e(),C(G,{key:1})):(e(),C($,{key:0}))]),a("div",{class:"song_button plus_button",onClick:N},[w(j)])])])):o("",!0),i.value=="error"?(e(),t("div",ss,[a("p",null,"⚠ Failed to Load Song: "+l(g.song_id),1)])):o("",!0),i.value=="loading"?(e(),t("div",as)):o("",!0)],64)}}};export{_s as _};
