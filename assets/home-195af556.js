import{_ as R,b as B,r as k,o,k as j,w as I,e as a,n as y,t as s,d as l,h as m,g as v,f as q,X as M,V as _,ac as S,ad as V,a2 as L,$ as b,W as N,F as z,i as F,aq as T,ar as A,a4 as D,c as E}from"./index-1fc629ac.js";import{_ as P}from"./PageTitle-092115f9.js";import{d as U}from"./display_json_text-01b7f379.js";import{R as W}from"./Rate-bb09ea0f.js";import{_ as X}from"./Pagination.vue_vue_type_style_index_0_lang-4ef08e73.js";import{C as G}from"./CommunityPost-b75616ac.js";import"./ArrowShape-8a941afa.js";/* empty css                                                   *//* empty css                                                  *//* empty css                                             */import"./More-84fec72f.js";import"./Comment-40c00899.js";import"./markdown_to_html_lite-855e1114.js";import"./index-97cf174a.js";import"./CharacterCard-20be52a3.js";import"./UserBusiness-680c825d.js";import"./Warning-f96db5f0.js";import"./Comment-f61365b3.js";const H={components:{Rate:W},props:["movie","index","no_appear_ani"],data(){return{display_json_text:U}},computed:{second_language(){return B().settings.second_language}},mounted(){},beforeUnmount(){},methods:{}},J={class:"movie_item_bg"},K={class:"movie_item_img"},O={class:"movie_item_text_wrapper"},Q={class:"movie_item_text"},Y={class:"title"},Z={key:0},$={key:1},ee={class:"tag"},te={key:0},ae={key:1},ie={key:2};function oe(h,u,e,d,i,n){const r=k("Rate"),p=k("router-link");return o(),j(p,{class:q(["movie_item section hover",{appear_section:!e.no_appear_ani}]),to:"/archive/movies/"+e.movie.movie_id.toLowerCase(),style:y({"animation-delay":Math.min(e.index,12)*.04+"s"})},{default:I(()=>[a("div",J,[a("div",{class:"movie_item_bg_item",style:y({"background-image":"url("+e.movie.cover+")"})},null,4)]),a("div",K,[a("div",{class:"img",style:y({"background-image":"url("+e.movie.cover+")"})},null,4)]),a("div",O,[a("div",Q,[a("div",Y,[a("h2",null,s(e.movie.title),1),e.movie.title_t&&i.display_json_text(e.movie.title_t)?(o(),l("h3",Z,s(i.display_json_text(e.movie.title_t)),1)):m("",!0),e.movie.title_t&&i.display_json_text(e.movie.title_t,n.second_language)&&i.display_json_text(e.movie.title_t,n.second_language)!=i.display_json_text(e.movie.title_t)?(o(),l("h3",$,s(i.display_json_text(e.movie.title_t,n.second_language)),1)):m("",!0)]),a("div",ee,[v(r,{rate:e.movie.rate},null,8,["rate"]),e.movie.publish_date&&e.movie.publish_date!="0000-00-00"?(o(),l("div",te,s(e.movie.publish_date),1)):m("",!0),e.movie.region?(o(),l("div",ae,s(h.$text("regions."+e.movie.region)),1)):m("",!0),e.movie.type?(o(),l("div",ie,s(h.$text("movie_type."+e.movie.type)),1)):m("",!0)])])])]),_:1},8,["to","class","style"])}const se=R(H,[["render",oe]]);const ne={id:"movies_home",class:"content"},_e={class:"archive_count"},le={class:"archive_pagination"},ce={class:"section archive_pagination_section blur_part"},Ie={__name:"home",setup(h){const u=M(),e=_([]),d=_(0),i=_(null),n=_(!1),r=_(!0),p=_(0);S((t,c,g)=>{p.value=T(),r.value=!1,g()}),V(()=>{r.value=!0;const t=u.query.page?parseInt(u.query.page):1;t===i.value?(A(p.value),n.value=!0):(i.value=t,e.value=[],x())}),L(()=>u.query.page,t=>{if(!r.value)return;const c=t?parseInt(t):1;c!==i.value&&(i.value=c,x(!0))}),w();async function w(){const t=await b("/archive/get_movies_count.php");d.value=parseInt(t.data)}const f=_(null);async function x(t){const c=await b("/archive/get_all_movies.php",{page:i.value});n.value=!1,e.value=c.data||[],t&&D(()=>{E(f.value)})}return(t,c)=>(o(),l("div",ne,[v(P,{title:t.$text("nav.archive.movies"),parent:{title:t.$text("nav.archive"),link:"/archive"}},null,8,["title","parent"]),v(N,{class:"achive_items_placeholder",loading:e.value.length==0},null,8,["loading"]),a("div",{class:"movie_item_container",ref_key:"movie_item_container",ref:f},[(o(!0),l(z,null,F(e.value,(g,C)=>(o(),j(se,{movie:g,key:g.movie_no,index:C,no_appear_ani:n.value},null,8,["movie","index","no_appear_ani"]))),128))],512),a("p",_e,s(d.value)+" "+s(t.$text("nav.archive.movies")),1),a("div",le,[a("div",ce,[v(X,{max_page:Math.ceil(d.value/36)},null,8,["max_page"])])]),v(G,{post_id:"archive/movies"})]))}};export{Ie as default};
