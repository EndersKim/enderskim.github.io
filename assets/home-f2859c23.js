import{_ as I,b as S,r as k,o as _,k as C,w as q,e as t,t as i,d as r,h as p,g as m,f as G,n as L,a4 as N,G as n,ai as V,aj as j,a8 as z,$ as b,a3 as F,F as M,i as T,ax as $,ay as A,aa as D,c as E}from"./index-b17261da.js";import{d as w}from"./display_json_text-b6b09356.js";import{R as P}from"./Rate-467c38fb.js";import{_ as U}from"./PageTitle-c4ca13cf.js";import{_ as H}from"./Pagination.vue_vue_type_style_index_0_lang-51f35c6a.js";import{C as J}from"./CommunityPost-b03e6721.js";/* empty css                                             */import"./ArrowShape-011a022f.js";/* empty css                                                   *//* empty css                                                  */import"./More-1ee246b5.js";import"./Comment-c7f6dd89.js";import"./markdown_to_html_lite-855e1114.js";import"./index-97cf174a.js";import"./CharacterCard-0e460992.js";import"./UserBusiness-1e7a0f3b.js";import"./FormTextarea-04b99bf5.js";import"./Warning-c02491ed.js";import"./Comment-b7d843c6.js";import"./GuestInfo-3e087214.js";const K={components:{Rate:P},props:["game","index","no_appear_ani"],data(){return{open_tag:!1}},computed:{game_title_t(){return this.game.title_t?w(this.game.title_t):null},game_title_t_second(){return this.game.title_t?w(this.game.title_t,S().settings.second_language):null}},mounted(){},beforeUnmount(){},methods:{}},O={class:"game_item_bg"},Q=["src"],W={class:"game_item_img"},X=["src"],Y=t("div",{class:"img_back"},null,-1),Z={class:"game_item_text_wrapper"},ee={class:"game_item_text"},te={class:"title"},ae={key:0},se={key:1},_e={class:"tag_box"},ne={class:"tag"},ie={key:0},oe={key:1},re={key:2};function le(v,g,e,u,h,s){const l=k("Rate"),c=k("router-link");return _(),C(c,{class:G(["game_item",{appear_section:!e.no_appear_ani}]),to:"/archive/games/"+e.game.game_id.toLowerCase(),style:L({"animation-delay":Math.min(e.index,12)*.04+"s"})},{default:q(()=>[t("div",O,[t("img",{class:"game_item_bg_item",src:e.game.cover},null,8,Q)]),t("div",W,[t("img",{src:e.game.cover},null,8,X),Y]),t("div",Z,[t("div",ee,[t("div",te,[t("h2",null,i(e.game.title),1),s.game_title_t?(_(),r("h3",ae,i(s.game_title_t),1)):s.game_title_t_second?(_(),r("h3",se,i(s.game_title_t_second),1)):p("",!0)]),t("div",_e,[t("div",ne,[m(l,{rate:e.game.rate},null,8,["rate"]),e.game.publish_date?(_(),r("div",ie,i(e.game.publish_date),1)):p("",!0),e.game.region?(_(),r("div",oe,i(v.$text("regions."+e.game.region)),1)):p("",!0),e.game.gameplay?(_(),r("div",re,i(v.$text("gameplay_short."+e.game.gameplay)),1)):p("",!0)])])])])]),_:1},8,["to","class","style"])}const ce=I(K,[["render",le]]);const me={id:"games_home",class:"content"},ge={class:"archive_count"},ue={class:"archive_pagination"},de={class:"section archive_pagination_section blur_part"},ze={__name:"home",setup(v){const g=N(),e=n([]),u=n(0),h=n(24),s=n(null),l=n(!1),c=n(!0),f=n(0);V((a,o,d)=>{f.value=$(),c.value=!1,d()}),j(()=>{c.value=!0;const a=g.query.page?parseInt(g.query.page):1;a===s.value?(A(f.value),l.value=!0):(s.value=a,e.value=[],x())}),z(()=>g.query.page,a=>{if(!c.value)return;const o=a?parseInt(a):1;o!==s.value&&(s.value=o,x(!0))}),R();async function R(){const a=await b("/archive/get_games_count.php");u.value=parseInt(a.data)}const y=n(null);async function x(a){const o=await b("/archive/get_games_all.php",{page:s.value});l.value=!1,e.value=o.data.games||[],h.value=o.data.capacity||24,a&&D(()=>{E(y.value)})}return(a,o)=>(_(),r("div",me,[m(U,{title:a.$text("nav.archive.games"),parent:{title:a.$text("nav.archive"),link:"/archive"}},null,8,["title","parent"]),m(F,{class:"achive_items_placeholder",loading:e.value.length==0},null,8,["loading"]),t("div",{class:"games_item_container",ref_key:"games_item_container",ref:y},[(_(!0),r(M,null,T(e.value,(d,B)=>(_(),C(ce,{game:d,key:d.game_no,no_appear_ani:l.value,index:B},null,8,["game","no_appear_ani","index"]))),128))],512),t("p",ge,i(u.value)+" "+i(a.$text("nav.archive.games")),1),t("div",ue,[t("div",de,[m(H,{max_page:Math.ceil(u.value/h.value)},null,8,["max_page"])])]),m(J,{post_id:"archive/games"})]))}};export{ze as default};
