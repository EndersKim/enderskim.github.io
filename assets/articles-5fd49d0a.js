import{_ as b,Z as v,$ as x,c as k,r as g,o as t,d as s,g as n,F as h,i as u,e as o,t as $,k as A,h as B}from"./index-539a8d41.js";import{_ as P}from"./Pagination.vue_vue_type_style_index_0_lang-60ff6f0f.js";import{_ as I}from"./ArticleItemMiddle-9a1e168d.js";import{_ as q}from"./PageTitle-66061194.js";import"./More-042937f0.js";import"./ArrowShape-3c76a453.js";/* empty css                                                   *//* empty css                                                  */const M={components:{Placeholder:v,Pagination:P,ArticleItemMiddle:I},data(){return{blog_articles:null,blog_article_years:null,count:0,capacity:1,page:null}},watch:{"$route.query.page":{handler(){const i=this.$route.query.page||1;this.page===null?(this.page=i,this.get_all()):i!==this.page&&(this.page=i,this.get_all(!0))},immediate:!0}},methods:{async get_all(i){let a;const _={page:this.page};a="/blog/get_articles_all.php";const l=await x(a,_);if(this.blog_articles=null,l.status!="success"){console.log(l);return}this.$nextTick(()=>{this.blog_articles=l.data.articles,this.blog_article_years={};let e=0;this.blog_articles.map(r=>{r.index=e++;const c="y-"+r.insert_time.slice(0,4);this.blog_article_years[c]||(this.blog_article_years[c]=[]),this.blog_article_years[c].push(r)}),this.capacity=parseInt(l.data.capacity),this.count=parseInt(l.data.count),i&&this.$nextTick(()=>{k(this.$refs.article_items_container)})})}}},w={class:"BlogArticlesArchive"},N={key:0,class:"article_items_container",ref:"article_items_container"},V={class:"article_years"},C={class:"article_year_title"},F={class:"article_year_items"},T={key:1,class:"blog_pagination"},D={class:"section blur_part"},E={key:2,style:{height:"30px"}};function L(i,a,_,l,e,r){const c=g("Placeholder"),d=g("ArticleItemMiddle"),m=g("Pagination");return t(),s("div",w,[n(c,{loading:!e.blog_articles,empty:e.blog_articles&&e.blog_articles.length==0},null,8,["loading","empty"]),e.blog_articles?(t(),s("div",N,[(t(!0),s(h,null,u(e.blog_article_years,(y,f)=>(t(),s("div",V,[o("h2",C,[o("span",null,$(f.slice(2)),1)]),o("div",F,[(t(!0),s(h,null,u(y,(p,z)=>(t(),A(d,{key:p.post_no,article_data:p,index:p.index},null,8,["article_data","index"]))),128))])]))),256))],512)):B("",!0),e.blog_articles&&e.count>e.capacity?(t(),s("div",T,[o("div",D,[n(m,{max_page:Math.ceil(e.count/e.capacity)},null,8,["max_page"])])])):(t(),s("div",E))])}const S=b(M,[["render",L]]),Z={class:"content"},j=o("div",{style:{height:"20px"}},null,-1),W={__name:"articles",setup(i){return(a,_)=>(t(),s("div",Z,[n(q,{title:a.$text("nav.blog.articles"),parent:{title:a.$text("nav.blog"),link:"/blog"}},null,8,["title","parent"]),n(S),j]))}};export{W as default};
