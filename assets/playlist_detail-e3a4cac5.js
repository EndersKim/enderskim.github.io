import{am as S,X as V,V as n,a1 as k,Z as z,$ as q,c as E,o as _,d as r,g as v,W as C,e as s,t as m,f as H,h as p,w as L,T as N,F as D,H as M,J as F,ak as O}from"./index-e4eea91b.js";import{_ as T}from"./SongsList-793b1e92.js";import{_ as Z}from"./Pagination.vue_vue_type_style_index_0_lang-cd91223e.js";import{a as J}from"./parse_song_data-b4c42901.js";import"./Pause-e0ed6f63.js";import"./More-2c944b97.js";import"./display_json_text-e58078e3.js";const K={key:0,class:"songlist_heading"},R={class:"bg_box"},U=["src"],W={class:"content"},X={class:"img_box"},j=["src"],A={class:"text_box"},G={class:"songlist_meta"},P=["title-data"],Q=s("span",{class:"playlist_type"},"网易云音乐歌单",-1),Y={key:1,class:"playlist_intro_open"},s1={class:"songlist_buttons"},t1=s("div",{class:"icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22"},[s("g",null,[s("path",{d:"M2.36807692,21.8609375 C2.91885817,21.8609375 3.41104567,21.696875 4.07901442,21.3101562 L18.2118269,13.11875 C19.2899519,12.4859375 19.8524519,11.8882812 19.8524519,10.9507812 C19.8524519,10.0132812 19.2899519,9.415625 18.2118269,8.79453125 L4.07901442,0.59140625 C3.41104567,0.2046875 2.91885817,0.040625 2.36807692,0.040625 C1.24307692,0.040625 0.317295673,0.89609375 0.317295673,2.3375 L0.317295673,19.5640625 C0.317295673,21.0054687 1.24307692,21.8609375 2.36807692,21.8609375 Z"})])])],-1),e1=s("p",{class:"text"},"播放歌单",-1),a1=[t1,e1],o1={class:"icon"},n1={width:"32",height:"28",viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg",style:{transform:"scale(2.2)"}},i1=s("path",{d:"M20.767 20.44a.81.81 0 00.49-.183l2.58-2.174c.316-.266.316-.681 0-.955l-2.58-2.183a.81.81 0 00-.49-.183c-.415 0-.673.258-.673.673v1.245h-1.162c-.739 0-1.195-.233-1.718-.847l-1.527-1.801 1.527-1.81c.54-.63.946-.847 1.677-.847h1.203v1.279c0 .407.258.664.673.664a.801.801 0 00.49-.174l2.58-2.175c.316-.266.316-.69 0-.955l-2.58-2.183a.761.761 0 00-.49-.183c-.415 0-.673.258-.673.665v1.386h-1.212c-1.228 0-1.992.34-2.863 1.386l-1.412 1.668-1.469-1.751c-.805-.946-1.569-1.303-2.747-1.303H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.437c.697 0 1.162.225 1.685.847l1.519 1.801-1.52 1.81c-.53.623-.954.847-1.643.847H8.896c-.53 0-.896.348-.896.838s.365.838.896.838h1.536c1.179 0 1.901-.356 2.706-1.303l1.478-1.751 1.444 1.718c.822.98 1.627 1.336 2.822 1.336h1.212v1.412c0 .415.258.672.673.672z"},null,-1),l1=[i1],c1=s("p",{class:"text"},"随机播放",-1),_1=["href"],r1=s("div",{class:"icon"},[s("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3819",width:"200",height:"200"},[s("path",{d:"M616.64142222 49.16337778c25.14488889-7.24764445 52.08746667-6.88355555 77.48266667-1.04675556 29.16124445 6.92906667 56.75235555 20.32071111 80.49777778 38.57066667 8.66986667 6.58773333 16.49777778 14.77973333 20.48 25.088 6.16675555 15.24622222 4.51697778 33.47342222-4.58524445 47.2064-7.94168889 12.33351111-21.44711111 20.92373333-35.99928889 22.76693333-11.62808889 1.59288889-23.81368889-0.87608889-33.80337778-7.05422222-5.632-3.31093333-9.92142222-8.41955555-15.57617777-11.69635555-15.16657778-9.6256-32.63146667-17.2032-50.8928-16.77084445-12.85688889 0.14791111-24.1664 7.68-32.88177778 16.53191111-8.15786667 8.41955555-12.31075555 20.83271111-9.61422222 32.38115556 6.26915555 23.59751111 12.50417778 47.19502222 18.76195555 70.79253333 44.98773333 2.30968889 89.95271111 14.21084445 128.62577778 37.69457778 37.59217778 23.25617778 71.55484445 52.74737778 98.48604444 87.89333333 22.85795555 29.78702222 40.18631111 63.80657778 50.7904 99.82862222 11.48017778 38.82097778 15.20071111 79.75822222 12.20835556 120.08106667-2.49173333 33.26862222-9.03395555 66.34382222-20.32071111 97.78062222-29.184 76.54968889-83.23982222 143.6672-152.81493333 187.16444445-51.02933333 32.23324445-109.63626667 51.67786667-169.40373334 59.09617778-41.25582222 5.15413333-83.29671111 5.17688889-124.34773333-1.85457778-84.35484445-13.93777778-163.40764445-55.97866667-223.40266667-116.70186667-59.61955555-59.73333333-101.11431111-137.26151111-117.89653333-219.96657778-12.37902222-60.3136-11.82151111-123.2896 1.91146667-183.33013333 16.78222222-74.0352 53.87377778-143.29173333 106.01813333-198.43982222 42.53013333-45.28355555 95.06133333-81.11217778 152.72391111-104.2432 5.9392-2.26417778 11.78737778-4.94933333 18.11342222-5.95057778 13.50542222-2.36657778 27.93244445 0.83057778 38.99164445 8.97706666 14.97315555 10.56995555 23.21066667 29.74151111 20.71893333 47.8776889-2.05937778 18.51164445-15.20071111 35.20284445-32.71111111 41.54026666-58.25422222 21.77706667-109.90933333 60.68906667-147.09191111 110.51235556-33.23448889 44.21404445-54.92053333 97.02968889-62.19093334 151.88195555-7.33866667 54.29475555-0.80782222 110.36444445 18.64817778 161.56444445 28.10311111 74.8544 83.97937778 139.264 155.21564445 175.9232 42.89422222 22.2208 91.18151111 33.82613333 139.48017777 33.49617778 39.7312-0.512 79.58755555-6.89493333 116.92942223-20.70755556 32.83626667-12.19697778 63.61315555-30.208 89.78204444-53.5552 24.39395555-21.61777778 44.69191111-47.74115555 60.17706667-76.40177778 7.75964445-14.62044445 14.92764445-29.67324445 19.30808889-45.68177778 12.92515555-45.76142222 15.16657778-95.35715555 1.34257777-141.18684444-11.43466667-38.43413333-34.96391111-72.69262222-65.01262222-99.00942222-13.28924445-11.62808889-27.48871111-22.28906667-42.71217778-31.25475556-13.44853333-7.55484445-28.13724445-12.6976-43.12177777-16.21333333 10.4448 40.84622222 21.61777778 81.52177778 32.21048889 122.33386667 1.79768889 9.78488889 3.59537778 19.56977778 5.27928888 29.37742222 1.54737778 42.10915555-13.22097778 84.52551111-40.37973333 116.736-25.30417778 30.35591111-61.2352 51.712-100.10168889 59.05066666-41.89297778 8.35128889-86.9376 0.46648889-122.91413333-22.75555555-34.34951111-21.77706667-59.72195555-56.26311111-73.10222222-94.43555556-7.5776-21.35608889-11.35502222-43.94097778-12.10595556-66.56-2.29831111-49.20888889 10.56995555-99.48728889 38.71857778-140.1856 33.0752-48.57173333 85.21955555-81.96551111 141.12995555-98.25848889-4.11875555-15.74684445-8.32853333-31.47093333-12.4928-47.21777778-10.79751111-33.98542222-8.4992-72.14648889 7.61173334-104.09528888 8.69262222-17.82897778 21.61777778-33.35964445 36.56817778-46.27342222 16.64568889-14.2336 36.07893333-25.47484445 57.26435555-31.30026667M483.14595555 419.33937778c-14.99591111 15.74684445-25.50897778 35.65795555-30.03733333 56.91164444-4.07324445 19.29671111-4.096 39.41262222-0.43235555 58.76622223 4.47146667 21.37884445 15.50791111 42.2912 33.80337778 54.90915555 14.19946667 10.08071111 32.68835555 13.14133333 49.62986666 9.8304 31.34577778-5.50684445 56.92302222-34.34951111 57.79911111-66.26417778-1.19466667-7.90755555-2.50311111-15.81511111-4.73315555-23.50648889-11.70773333-44.28231111-23.51786667-88.53048889-35.15733334-132.83555555-26.48746667 8.16924445-51.70062222 21.93635555-70.87217778 42.1888z"})])],-1),u1=[r1],d1={class:"songlist_loading"},v1={class:"songlist_top"},p1=s("h3",{class:"section_title"},"歌曲列表",-1),g1={class:"songlist_count"},h1={class:"songlist_content"},m1={key:0,class:"songlist_pagination blur_part"},x=100,$1={__name:"playlist_detail",setup(f1){const e=S(),i=V(),g=n(!0),a=n(null),l=n(null),u=n(i.query.page?parseInt(i.query.page):1);k(()=>i.query.page,t=>{u.value=t?parseInt(t):1,f(i.params.id,u.value,!0)}),z(async()=>{await $(i.params.id),await f(i.params.id,u.value,!1)});const h=n(0),y=n(1),d=n("loading");async function $(t){const c=await q("/ncm/playlist_info/",{id:t});if(!c)return;const o=c.playlist;o&&(a.value={title:o.name,intro:o.description,cover_url:o.coverImgUrl,id:o.id},h.value=parseInt(o.trackCount),document.title=o.name+" - Kloudy Shape")}const w=n(null);async function f(t,c,o){d.value="loading";const b=(await q("/ncm/playlist/",{id:t,page:c})).songs;if(!b){d.value="error";return}l.value=b.map(J),d.value="success",y.value=(u.value-1)*x+1,o&&E(w.value)}k(u,t=>{f(i.params.id,t,!0)});function B(){l.value&&(e.queue=[],l.value.forEach(t=>{e.queue.indexOf(t)==-1&&e.queue.push(t)}),e.current_song=e.queue[0],e.current_song_index=0,M({message:"已替换播放队列为本页歌曲"}))}function I(){l.value&&(e.queue=[],l.value.forEach(t=>{e.queue.indexOf(t)==-1&&e.queue.push(t)}),e.queue.sort(()=>Math.random()-.5),e.current_song=e.queue[0],e.current_song_index=0,M({message:"已替换播放队列为本页歌曲 (随机排序)"}))}return(t,c)=>(_(),r(D,null,[v(C,{error:d.value=="error",error_text:"无法找到此歌单"},null,8,["error"]),a.value?(_(),r("div",K,[s("div",R,[s("img",{src:a.value.cover_url},null,8,U)]),s("div",W,[s("div",X,[s("img",{src:a.value.cover_url},null,8,j)]),s("div",A,[s("div",G,[s("h1",{"title-data":a.value.title},m(a.value.title),9,P),a.value.intro?(_(),r("p",{key:0,class:H(["playlist_intro",{short:g.value}])},[Q,s("span",null,m(a.value.intro),1)],2)):p("",!0),a.value.intro?(_(),r("p",Y,[s("a",{onClick:c[0]||(c[0]=o=>g.value=!g.value)},m(g.value?"展开":"收起"),1)])):p("",!0)]),s("div",s1,[s("div",{class:"action_button",onClick:B},a1),s("button",{class:"action_button",onClick:I},[s("div",o1,[(_(),r("svg",n1,l1))]),c1]),s("a",{class:"action_button no_text",href:"https://music.163.com/#/playlist?id="+a.value.id,target:"_blank"},u1,8,_1)])])])])):p("",!0),l.value?(_(),r("div",{key:1,class:"songlist_box section content",ref_key:"songlist_box",ref:w},[v(N,{name:"loading_fade"},{default:L(()=>[F(s("div",d1,[v(C,{loading:""})],512),[[O,d.value=="loading"]])]),_:1}),s("div",v1,[p1,s("p",g1,m(h.value),1)]),s("div",h1,[v(T,{songs_data:l.value,start_index:y.value},null,8,["songs_data","start_index"]),h.value>x?(_(),r("div",m1,[v(Z,{max_page:Math.ceil(h.value/x)},null,8,["max_page"])])):p("",!0)])],512)):p("",!0)],64))}};export{$1 as default};
