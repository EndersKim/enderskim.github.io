import{C as G,_ as H,d as Q}from"./Comment-740fb727.js";import{_ as z,o as _,d as l,e as t,x as Z,Z as K,P as X,ak as Y,G as $,D as tt,U as et,M as ot,al as nt,a9 as st,v as it,b as at,c as w,$ as ct,J as r,H as k,I as P,am as U,q as p,r as m,g as i,h as g,w as u,t as a,f as _t,T as x,k as T,af as mt,F as b,i as F,O as y,an as lt,l as h,Q as V}from"./index-539a8d41.js";import{_ as rt}from"./Pagination.vue_vue_type_style_index_0_lang-60ff6f0f.js";import{C as dt}from"./CharacterCard-b9e05c7b.js";import{W as ut}from"./Warning-85841e48.js";import{C as gt}from"./Comment-fb5e371c.js";const ht={},pt={width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},ft=t("path",{d:"M22.720 2.049 C 18.640 2.424,15.106 4.005,12.288 6.718 C 9.409 9.489,7.671 12.913,7.150 16.840 C 6.972 18.187,7.033 20.764,7.277 22.200 C 7.731 24.862,8.523 27.188,9.920 29.960 C 12.181 34.445,15.588 38.865,20.147 43.225 C 21.799 44.806,22.914 45.729,23.354 45.879 C 24.447 46.252,25.077 45.881,27.843 43.231 C 34.393 36.956,38.688 30.411,40.276 24.280 C 40.806 22.238,40.919 21.317,40.919 19.040 C 40.919 17.263,40.896 16.880,40.741 16.071 C 40.021 12.317,38.404 9.309,35.712 6.718 C 33.203 4.304,30.014 2.731,26.558 2.205 C 25.731 2.079,23.420 1.985,22.720 2.049 M25.442 6.084 C 28.543 6.469,31.110 7.729,33.278 9.930 C 35.110 11.788,36.290 14.063,36.802 16.720 C 36.954 17.510,37.022 19.019,36.952 20.060 C 36.743 23.172,35.519 26.678,33.413 30.200 C 31.437 33.502,28.202 37.441,25.012 40.429 L 23.998 41.378 22.986 40.429 C 18.566 36.286,14.689 31.090,12.830 26.818 C 10.204 20.785,10.429 15.641,13.506 11.335 C 14.362 10.137,15.965 8.664,17.240 7.904 C 19.765 6.398,22.710 5.745,25.442 6.084 M22.320 11.192 C 19.290 11.861,16.979 14.137,16.220 17.200 C 15.983 18.159,15.983 19.841,16.220 20.800 C 16.821 23.223,18.320 25.094,20.520 26.164 C 21.790 26.782,22.427 26.920,24.000 26.920 C 25.573 26.920,26.210 26.782,27.480 26.164 C 29.680 25.094,31.179 23.223,31.780 20.800 C 32.017 19.841,32.017 18.159,31.780 17.200 C 31.179 14.777,29.679 12.905,27.480 11.836 C 26.295 11.260,25.638 11.107,24.200 11.072 C 23.239 11.048,22.865 11.072,22.320 11.192 M24.600 15.042 C 26.163 15.262,27.591 16.599,27.912 18.144 C 28.481 20.883,26.188 23.342,23.420 22.959 C 21.839 22.741,20.412 21.412,20.088 19.856 C 19.576 17.394,21.339 15.147,23.920 14.971 C 23.986 14.967,24.292 14.999,24.600 15.042 "},null,-1),vt=[ft];function yt(e,o){return _(),l("svg",pt,vt)}const Ct=z(ht,[["render",yt]]);const wt={components:{Comment:G,Avatar:Z,Placeholder:K,PageDialog:X,FormSwitch:Y,FormTextarea:$,Pagination:rt,CharacterCard:dt,FormButton:tt,Warning:ut,CommentIcon:gt,User:et,Mail:ot,Local:Ct,Close:nt,Plus:st,CommentContent:H},props:["post_id"],data(){return{post:null,comments:null,post_page:null,order:"recent",active_order:null,open_add_images_dialog:!1,add_images_address:"",form:{content:"",attachments:[]},reply_target:null,delete_target:null,comment_info:{nickname:"",email:"",website:"",remember:!0,agree:!1},open_delete_dialog:!1,open_user_dialog:!1,open_write_comment_dialog:!1,write_comment_loading:!1,delete_dialog:{display_content:null,comment_no:null},user_dialog:{},scroll_target:null,active_animation:!1,reload_loading:!1,component_actived:!0}},activated(){this.component_actived=!0},deactivated(){this.component_actived=!1},computed:{Account(){return it()},SettingsStore(){return at()}},mounted(){this.active_animation=!1,this.post_page=this.$route.query.cmpage||1,this.get_post();let e=JSON.parse(localStorage.getItem("comment_info"));e&&(this.comment_info=e)},watch:{post_id:{handler(){this.active_animation=!1,this.reload_loading=!1,this.comments=null,this.post=null,this.post_page=this.$route.query.cmpage||1,this.scroll_target=null,this.get_post()}},"$route.query.cmpage":{handler(){if(!this.component_actived)return;const e=this.$route.query.cmpage||1;e!==this.post_page&&(this.post_page=e,this.scroll_target=this.$el,this.active_animation=!1,this.reload_loading=!0,this.get_post())}}},methods:{archor_event(e){var o;e&&(w(e.$el,!0),(o=e.$refs.comment_main_box)==null||o.classList.add("hightlight"),setTimeout(()=>{var d;(d=e.$refs.comment_main_box)==null||d.classList.remove("hightlight")},1e3))},comment_loaded(e){let o=null;this.$route.hash&&(o=Q(this.$route.hash.slice(1))),o==e.comment.comment_no&&(setTimeout(()=>{var d;w(e.$el,!0),(d=e.$refs.comment_main_box)==null||d.classList.add("hightlight")},500),setTimeout(()=>{var d;(d=e.$refs.comment_main_box)==null||d.classList.remove("hightlight")},1500))},async get_post(){const e=await ct("community/get_post.php",{post_id:this.post_id,page:this.post_page});e.status=="success"?(this.post=e.data.post,this.comments=e.data.post_comments,this.$nextTick(()=>{this.get_post_done()})):(this.comments=null,r({message:e.message,status:"error"}))},get_post_done(){this.scroll_target&&(w(this.scroll_target),this.scroll_target=null),this.$nextTick(()=>{this.reload_loading=!1})},async add_comment_action(){this.write_comment_loading=!0;const e="comment_toast_key-"+Math.random();r({message:"评论发表中",status:"loading",key:e}),k("community/new_comment.php",{content:this.form.content.trim(),attachments:JSON.stringify(this.form.attachments),post_id:this.post_id,tokenid:await P(),cid:this.Account.active_character.cid,device_id:await U(),parent_no:this.reply_target?this.reply_target.comment_no:null}).then(o=>{let d=o;d.status=="success"?(r({message:p("community.post_comment_success"),status:"success",key:e}),this.active_animation=!0,this.get_post(),this.form.content="",this.form.attachments=[],this.open_write_comment_dialog=!1,this.write_comment_loading=!1):(console.log(d),this.write_comment_loading=!1,r({message:d.message||d,status:"error"}))})},async add_comment_visitor_action(){this.write_comment_loading=!0,k("community/new_visitor_comment.php",{content:this.form.content.trim(),post_id:this.post_id,nickname:this.comment_info.nickname.trim(),email:this.comment_info.email.trim(),website:this.comment_info.website.trim(),device_id:await U(),parent_no:this.reply_target?this.reply_target.comment_no:null}).then(e=>{let o=e;o.status=="success"?(r({message:p("community.post_comment_success"),status:"success"}),this.active_animation=!0,this.get_post(),this.form.content="",this.open_write_comment_dialog=!1,this.write_comment_loading=!1,this.comment_info.remember&&localStorage.setItem("comment_info",JSON.stringify(this.comment_info))):(console.log(o),this.write_comment_loading=!1,r({message:o.message||o,status:"error"}))})},add_comment_request(){if(this.form.content.trim()==""&&this.form.attachments.length==0){r({message:p("community.enter_comment"),status:"error"});return}if(this.Account.active_character)this.add_comment_action();else{if(!this.comment_info.nickname.trim()){r({message:p("account.enter_nickname"),status:"error"});return}if(this.comment_info.agree==!1){r({message:p("account.agree_need"),status:"error"});return}this.add_comment_visitor_action()}},reply_comment_event(e){this.open_write_comment_dialog=!0,this.reply_target=e},delete_comment_event(e){this.open_delete_dialog=!0,this.delete_target=e},async delete_comment_request(){k("community/delete_comment.php",{tokenid:await P(),comment_no:this.delete_target.comment_no}).then(e=>{e.status=="success"?(this.get_post(),this.active_animation=!0,r({status:"success",message:p("community.delete_comment_success")}),this.open_delete_dialog=!1):r({status:"error",message:e.message})})},view_user_event(e){this.open_user_dialog=!0,this.user_dialog=e},add_emoji_action(){r({message:"该功能开发中（请使用系统自带的 Emoji 输入法）"})},add_upload_images_action(){r({message:"该功能开发中"})},add_images_action(){if(!this.add_images_address){r({message:"请输入图片地址",status:"error"});return}if(this.form.attachments.find(e=>e.src==this.add_images_address)){r({message:"图片已存在",status:"error"});return}this.form.attachments.push({type:"image",src:this.add_images_address}),this.add_images_address="",this.open_add_images_dialog=!1},remove_attachment_action(e){this.form.attachments.splice(e,1)}}},kt={key:0,class:"CommunityPost"},xt={key:0,class:"first_loading"},bt={key:0,class:"community_post_section section"},Vt={class:"comments_title"},Mt={class:"section_title"},St={class:"comments_count"},At={class:"comments_viewer"},Lt={key:0,class:"comments_tools_box blur_part"},Pt={class:"comments_tools"},Ut={class:"comments_loading"},Tt={class:"comments_loading_icon_box"},Ft={key:0,class:"confirm_dialog danger delete_dialog"},zt={class:"icon_container"},Bt={class:"title_container"},qt={class:"confirm_dialog_title"},Dt={class:"confirm_dialog_text"},Nt={class:"add_comment_reply_target"},It={class:"add_comment_reply_target_character_name"},jt={class:"button_container"},Jt={class:"write_comment_dialog"},Ot={key:0,class:"add_comment_character"},Wt={class:"character_name"},Rt=t("div",{style:{flex:"1"}},null,-1),Et={key:1,class:"add_comment_new_character"},Gt={class:"add_comment_new_character_row"},Ht={class:"form_rows"},Qt={class:"form_row_lable"},Zt={class:"text"},Kt={class:"form_row_note"},Xt={class:"form_row_lable"},Yt={class:"text"},$t={class:"form_row_note"},te={class:"form_row_lable"},ee={class:"text"},oe={class:"form_row_note"},ne=t("div",{style:{height:"14px"}},null,-1),se={key:2,class:"add_comment_reply_target"},ie={class:"add_comment_reply_target_character_name"},ae={class:"add_comment_text"},ce={key:3,class:"add_comment_actions"},_e=t("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"12634",width:"200",height:"200"},[t("path",{d:"M511.573333 85.333333C276.053333 85.333333 85.333333 276.48 85.333333 512s190.72 426.666667 426.24 426.666667C747.52 938.666667 938.666667 747.52 938.666667 512S747.52 85.333333 511.573333 85.333333zM362.666667 341.333333c35.413333 0 64 28.586667 64 64S398.08 469.333333 362.666667 469.333333 298.666667 440.746667 298.666667 405.333333 327.253333 341.333333 362.666667 341.333333z m350.293333 286.72C674.133333 711.253333 599.04 768 512 768s-162.133333-56.746667-200.96-139.946667c-6.826667-14.08 3.413333-30.72 19.2-30.72h363.52c15.786667 0 26.026667 16.64 19.2 30.72zM661.333333 469.333333c-35.413333 0-64-28.586667-64-64S625.92 341.333333 661.333333 341.333333s64 28.586667 64 64-28.586667 64-64 64z"})],-1),me=[_e],le=t("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 200 200"},[t("g",{id:"图层_1"},[t("path",{d:`M155.3,97.8c1.5-1.8,2.8-2.6,4.2-2.6c1.3,0,2.7,1,4.2,2.8c1.6,2,3.4,4.4,5.5,7.2c2.1,2.8,4.1,5.6,6.3,8.6\r
		c2.1,2.9,4.2,5.8,6.2,8.5c2,2.7,3.8,5.1,5.3,7c1.5,1.9,1.9,3.4,1.3,4.5c-0.6,1.2-2,1.8-4.2,1.8c-1.3,0-2.8,0-4.5,0.1\r
		c-1.7,0.1-3.2,0.1-4.4,0.1c-1.7-0.1-2.8,0.6-3.3,2c-0.5,1.4-0.7,3.3-0.7,5.6v5.7c0,2.1,0,4.2-0.1,6.3c0,2.1-0.1,4.1-0.1,5.9v4.7\r
		c-0.1,2.7-0.6,4.7-1.5,6c-0.9,1.2-2.7,1.9-5.4,1.9c-1.9,0-3.5,0-4.9-0.1c-1.4,0-3-0.1-4.7-0.1c-1.5,0-2.6-0.2-3.4-0.7\r
		c-0.8-0.5-1.5-1.1-1.9-1.8c-0.4-0.7-0.7-1.5-0.8-2.4c-0.1-0.9-0.2-1.7-0.2-2.5c0-1.9,0-3.9,0.1-6c0-2.2,0.1-4.4,0.1-6.6\r
		c0-2.3,0-4.4,0.1-6.6c0-2.1,0.1-4.1,0.1-5.9c0-1.6-0.2-2.9-0.6-3.9c-0.4-1-1.4-1.4-3-1.4c-1.5,0-3.3-0.1-5.4-0.2\r
		c-2.2-0.1-3.9-0.1-5.2-0.1c-2.3,0-3.7-0.7-4.1-2.1c-0.4-1.4,0.3-3.2,2.2-5.4c1.6-2,3.4-4.4,5.5-7.1c2.1-2.7,4.1-5.5,6.2-8.3\r
		c2.1-2.8,4.1-5.6,6.1-8.2C152.1,101.7,153.8,99.5,155.3,97.8L155.3,97.8z M155.3,97.8`}),t("g",null,[t("ellipse",{cx:"66.7",cy:"58.3",rx:"16.7",ry:"16.7"}),t("path",{d:`M138.3,153.6c0-2.3,0-4.6,0.1-6.8c0-0.4,0-0.8,0-1.2c-2.1-0.1-3.1-0.1-3.6,0l-0.6,0c-8.1,0-12.4-4.8-13.7-9.4\r
			c-0.9-3.3-1-8.5,4.1-14.5c1.5-1.9,3.3-4.2,5.2-6.8c2-2.7,4.1-5.5,6.2-8.3l6.1-8.2c1.7-2.2,3.1-4.1,4.5-5.8l-14.9-19.9\r
			c-2.1-2.8-6.1-3.3-8.9-1.1c-0.4,0.3-0.8,0.7-1.1,1.1l-33.3,43.1c-1.4,1.8-4.1,2.1-5.9,0.6c-0.2-0.2-0.5-0.4-0.6-0.6L63.6,93.7\r
			c-2.2-2.7-6.1-3.1-8.8-1c-0.4,0.3-0.7,0.6-1,1l-35.4,45.8c-1.1,1.5-1.7,3.2-1.8,5.1v7.6c0,3.4,2.8,6.2,6.2,6.2h115.4\r
			C138.3,156.8,138.3,155.2,138.3,153.6z`})])])],-1),re=[le],de={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 200 200",style:{"enable-background":"new 0 0 200 200"},"xml:space":"preserve"},ue=t("g",{id:"图层_1"},[t("path",{d:`M166.6,128.8c6.7-0.1,13,3.4,16.4,9.2c3.4,5.8,3.4,13,0,18.8c-3.4,5.8-9.7,9.3-16.4,9.2l-12.2,0c3.5-2.4,6.2-5.8,7.9-9.7\r
		l4.3,0c3.2,0.1,6.2-1.6,7.9-4.4c1.6-2.8,1.6-6.2,0-9c-1.6-2.8-4.7-4.5-7.9-4.4l-18.3,0c-3,0-5.8,1.5-7.4,4\r
		c-1.6,2.5-1.9,5.6-0.8,8.4H130c-1-5.4,0.4-11.1,4-15.3c3.5-4.3,8.8-6.7,14.3-6.7L166.6,128.8L166.6,128.8z M120.8,128.8l12.2,0\r
		c-3.5,2.4-6.2,5.8-7.9,9.7l-4.3,0c-3.2-0.1-6.2,1.6-7.9,4.4c-1.6,2.8-1.6,6.2,0,9c1.6,2.8,4.7,4.5,7.9,4.4h18.3\r
		c2.8,0,5.4-1.3,7-3.5c1.7-2.2,2.3-5,1.5-7.7l9.9,0c0.7,5.3-1,10.6-4.5,14.6c-3.5,4-8.6,6.3-13.9,6.3l-18.3,0\r
		c-10.1-0.2-18.2-8.5-18.2-18.6C102.6,137.3,110.7,129,120.8,128.8L120.8,128.8z M120.8,128.8`}),t("g",null,[t("ellipse",{cx:"66.7",cy:"58.3",rx:"16.7",ry:"16.7"}),t("path",{d:`M92.6,147.4c0-15.4,12.6-28.3,28-28.6c0.1,0,0.1,0,0.2,0l12.2,0c2,0,4,0.6,5.6,1.7c3.1-1.1,6.3-1.7,9.7-1.7l17.9,0\r
			l-34.5-46.1c-2.1-2.8-6.1-3.3-8.9-1.1c-0.4,0.3-0.8,0.7-1.1,1.1l-33.3,43.1c-1.4,1.8-4.1,2.1-5.9,0.6c-0.2-0.2-0.5-0.4-0.6-0.6\r
			L63.6,93.7c-2.2-2.7-6.1-3.1-8.8-1c-0.4,0.3-0.7,0.6-1,1l-35.4,45.7c-1.1,1.5-1.7,3.2-1.8,5.1v7.6c0,3.4,2.8,6.2,6.2,6.2h71.9\r
			C93.4,155,92.6,151.3,92.6,147.4z`})])],-1),ge=t("g",{id:"图层_2"},null,-1),he=[ue,ge],pe={key:4,class:"add_comments_attachments"},fe=["onClick"],ve=["title"],ye=["src"],Ce={class:"attachment_item"},we=t("div",{style:{height:"14px"}},null,-1),ke={class:"agree_link"},xe={class:"terms_link",href:"/about/terms",target:"_blank"},be={class:"terms_link",href:"/about/terms",target:"_blank"},Ve={class:"terms_link",href:"/about/terms",target:"_blank"},Me=t("div",{style:{height:"10px"}},null,-1),Se=t("div",{style:{height:"20px"}},null,-1),Ae={class:"add_comment_submit"},Le={class:"add_images_dialog"},Pe={class:"form_buttons_row"};function Ue(e,o,d,Te,n,c){const C=m("Placeholder"),B=m("Comment"),q=m("Pagination"),D=m("CommentIcon"),N=m("Warning"),M=m("CommentContent"),f=m("FormButton"),v=m("PageDialog"),I=m("CharacterCard"),j=m("Avatar"),J=m("User"),O=m("Mail"),W=m("Local"),S=m("FormSwitch"),A=m("FormTextarea"),R=m("Close"),E=m("Plus");return c.SettingsStore.settings.active_interaction?(_(),l("div",kt,[n.comments?g("",!0):(_(),l("div",xt,[i(C,{loading:""})])),i(x,{name:"fade_trans"},{default:u(()=>[n.comments?(_(),l("div",bt,[t("div",Vt,[t("h3",Mt,a(e.$text("community.comments")),1),t("p",St,a(n.post&&n.post.comments_count),1)]),t("div",At,[t("div",{class:_t(["comments_main",{active_animation:n.active_animation}])},[i(x,{name:"comment_empty_transition"},{default:u(()=>[n.comments&&n.comments.length==0?(_(),T(C,{key:0,empty:n.comments&&n.comments.length==0,empty_title:e.$text("community.no_comments")},null,8,["empty","empty_title"])):g("",!0)]),_:1}),i(mt,{name:"comment_transition",tag:"span"},{default:u(()=>[(_(!0),l(b,null,F(n.comments,s=>(_(),T(B,{key:s.comment_no,ref_for:!0,ref:"comment_ref",comment:s,onView_user_event:c.view_user_event,onRefresh_event:o[0]||(o[0]=L=>c.get_post()),onReply_comment_event:c.reply_comment_event,onDelete_comment_event:c.delete_comment_event,onLoaded:c.comment_loaded,onArchor_event:c.archor_event},null,8,["comment","onView_user_event","onReply_comment_event","onDelete_comment_event","onLoaded","onArchor_event"]))),128))]),_:1})],2),n.post?(_(),l("div",Lt,[t("div",Pt,[i(q,{page_name:"cmpage",max_page:Math.ceil(n.post.comments_count/10)||1},null,8,["max_page"]),t("a",{class:"comments_tools_button",onClick:o[1]||(o[1]=s=>{n.open_write_comment_dialog=!0,n.reply_target=null})},[i(D),t("span",null,a(e.$text("community.post_comment")),1)])])])):g("",!0)]),i(x,{name:"fade_trans"},{default:u(()=>[y(t("div",Ut,[t("div",Tt,[i(C,{loading:""})])],512),[[lt,n.reload_loading]])]),_:1})])):g("",!0)]),_:1}),i(v,{modelValue:n.open_delete_dialog,"onUpdate:modelValue":o[4]||(o[4]=s=>n.open_delete_dialog=s)},{default:u(()=>[n.delete_target?(_(),l("div",Ft,[t("div",zt,[i(N)]),t("div",Bt,[t("h3",qt,a(e.$text("community.delete_comment_confirm")),1),t("p",Dt,a(e.$text("community.delete_comment_warning")),1)]),t("div",Nt,[t("p",It,a(n.delete_target.character.nickname),1),i(M,{comment:n.delete_target},null,8,["comment"])]),t("div",jt,[i(f,{class:"plain",icon:"cancel",onClick:o[2]||(o[2]=s=>n.open_delete_dialog=!1)},{default:u(()=>[h(a(e.$text("dialog.cancel")),1)]),_:1}),i(f,{class:"danger",icon:"confirm",onClick:o[3]||(o[3]=s=>c.delete_comment_request())},{default:u(()=>[h(a(e.$text("dialog.confirm")),1)]),_:1})])])):g("",!0)]),_:1},8,["modelValue"]),i(v,{modelValue:n.open_user_dialog,"onUpdate:modelValue":o[5]||(o[5]=s=>n.open_user_dialog=s),title:" ",class:"user_dialog"},{default:u(()=>[i(I,{character:n.user_dialog},null,8,["character"])]),_:1},8,["modelValue"]),i(v,{modelValue:n.open_write_comment_dialog,"onUpdate:modelValue":o[19]||(o[19]=s=>n.open_write_comment_dialog=s),title:e.$text("community.write_comment"),loading:n.write_comment_loading},{default:u(()=>[t("div",Jt,[c.Account.active_character?(_(),l("div",Ot,[i(j,{slot:"reference",avatar_url:c.Account.active_character.avatar_url,nickname:c.Account.active_character.nickname,size:40},null,8,["avatar_url","nickname"]),t("p",Wt,a(c.Account.active_character.nickname),1),Rt])):g("",!0),c.Account.active_character?g("",!0):(_(),l("div",Et,[t("div",Gt,[t("p",null,[t("a",{onClick:o[6]||(o[6]=s=>c.Account.open_login=!0)},a(e.$text("account.login")),1),h(" , "),t("a",{onClick:o[7]||(o[7]=s=>c.Account.open_register=!0)},a(e.$text("account.register")),1),h(" "+a(e.$text("community.or_guest_comment")),1)])]),t("div",Ht,[t("div",Qt,[i(J),t("div",Zt,[t("h4",null,a(e.$text("account.nickname")),1)])]),y(t("input",{class:"kinput","onUpdate:modelValue":o[8]||(o[8]=s=>n.comment_info.nickname=s)},null,512),[[V,n.comment_info.nickname]]),t("ul",Kt,[t("li",null,a(e.$text("account.nickname_info")),1)]),t("div",Xt,[i(O),t("div",Yt,[t("h4",null,a(e.$text("account.email")),1)])]),y(t("input",{class:"kinput","onUpdate:modelValue":o[9]||(o[9]=s=>n.comment_info.email=s)},null,512),[[V,n.comment_info.email]]),t("ul",$t,[t("li",null,a(e.$text("account.email_info_private")),1),t("li",null,a(e.$text("account.email_info_avatar")),1),t("li",null,a(e.$text("account.email_info_replay")),1)]),t("div",te,[i(W),t("div",ee,[t("h4",null,a(e.$text("account.website")),1)])]),y(t("input",{class:"kinput","onUpdate:modelValue":o[10]||(o[10]=s=>n.comment_info.website=s)},null,512),[[V,n.comment_info.website]]),t("ul",oe,[t("li",null,a(e.$text("account.website_info")),1)]),ne,i(S,{modelValue:n.comment_info.remember,"onUpdate:modelValue":o[11]||(o[11]=s=>n.comment_info.remember=s),on_text:e.$text("account.remember_guest_info"),plain:!0},null,8,["modelValue","on_text"])])])),n.reply_target?(_(),l("div",se,[t("p",ie,a(e.$text("community.reply_to"))+" "+a(n.reply_target.character.nickname),1),i(M,{comment:n.reply_target},null,8,["comment"])])):g("",!0),t("div",ae,[i(A,{placeholder:e.$text("community.write_comment"),min_line:5,modelValue:n.form.content,"onUpdate:modelValue":o[12]||(o[12]=s=>n.form.content=s)},null,8,["placeholder","modelValue"])]),c.Account.is_admin?(_(),l("div",ce,[t("button",{class:"add_comment_action_btn",onClick:o[13]||(o[13]=(...s)=>c.add_emoji_action&&c.add_emoji_action(...s))},me),t("button",{class:"add_comment_action_btn",onClick:o[14]||(o[14]=(...s)=>c.add_upload_images_action&&c.add_upload_images_action(...s))},re),t("button",{class:"add_comment_action_btn",onClick:o[15]||(o[15]=s=>n.open_add_images_dialog=!0)},[(_(),l("svg",de,he))])])):g("",!0),n.form.attachments.length>0?(_(),l("div",pe,[(_(!0),l(b,null,F(n.form.attachments,(s,L)=>(_(),l("div",{class:"attachment_item",key:s.type+s.src},[t("button",{class:"remove_attachment",onClick:Fe=>c.remove_attachment_action(L)},[i(R)],8,fe),t("div",{class:"image_attachment",title:s.src},[t("img",{src:s.src},null,8,ye)],8,ve)]))),128)),t("div",Ce,[t("button",{class:"add_image_attachment",onClick:o[16]||(o[16]=s=>n.open_add_images_dialog=!0)},[i(E)])])])):g("",!0),c.Account.active_character?g("",!0):(_(),l(b,{key:5},[we,i(S,{modelValue:n.comment_info.agree,"onUpdate:modelValue":o[17]||(o[17]=s=>n.comment_info.agree=s),on_text:e.$text("account.agree"),plain:!0},null,8,["modelValue","on_text"]),t("p",ke,[h(a(e.$text("account.agree_info0"))+" ",1),t("a",xe,a(e.$text("account.agree_info1")),1),h(" "+a(e.$text("account.agree_info_"))+" ",1),t("a",be,a(e.$text("account.agree_info2")),1),h(" "+a(e.$text("account.agree_info_and"))+" ",1),t("a",Ve,a(e.$text("account.agree_info3")),1)]),Me],64)),Se,t("div",Ae,[i(f,{icon:"submit",onClick:o[18]||(o[18]=s=>c.add_comment_request())},{default:u(()=>[h(a(e.$text("community.post_comment")),1)]),_:1})])])]),_:1},8,["modelValue","title","loading"]),i(v,{modelValue:n.open_add_images_dialog,"onUpdate:modelValue":o[22]||(o[22]=s=>n.open_add_images_dialog=s)},{default:u(()=>[t("div",Le,[i(A,{placeholder:"输入图片地址",modelValue:n.add_images_address,"onUpdate:modelValue":o[20]||(o[20]=s=>n.add_images_address=s)},null,8,["modelValue"]),t("div",Pe,[i(f,{class:"plain",onClick:o[21]||(o[21]=s=>n.open_add_images_dialog=!1)},{default:u(()=>[h("取消")]),_:1}),i(f,{onClick:c.add_images_action},{default:u(()=>[h("添加图片")]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"])])):g("",!0)}const je=z(wt,[["render",Ue]]);export{je as C};
